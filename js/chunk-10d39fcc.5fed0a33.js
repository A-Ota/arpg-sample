(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10d39fcc"],{1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},"159b":function(t,e,n){var i=n("da84"),r=n("fdbc"),o=n("17c2"),s=n("9112");for(var a in r){var u=i[a],c=u&&u.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(l){c.forEach=o}}},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,r=n("a640"),o=n("ae40"),s=r("forEach"),a=o("forEach");t.exports=s&&a?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"18a5":function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("anchor")},{anchor:function(t){return r(this,"a","name",t)}})},"277d":function(t,e,n){var i=n("23e7"),r=n("e8b5");i({target:"Array",stat:!0},{isArray:r})},3835:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("277d");function i(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){r=!0,o=u}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}}n("a630"),n("fb6a"),n("0d03"),n("b0c0"),n("25f0");function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return i(t)||r(t,e)||s(t,e)||a()}},"408a":function(t,e,n){var i=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},4160:function(t,e,n){"use strict";var i=n("23e7"),r=n("17c2");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},4795:function(t,e,n){var i=n("23e7"),r=n("da84"),o=n("342f"),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,n){var i=arguments.length>2,r=i?s.call(arguments,2):void 0;return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};i({global:!0,bind:!0,forced:a},{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},"486d":function(t,e,n){},"4df4":function(t,e,n){"use strict";var i=n("0366"),r=n("7b0b"),o=n("9bdd"),s=n("e95a"),a=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,h,f,d,p=r(t),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,b=c(p),_=0;if(y&&(v=i(v,g>2?arguments[2]:void 0,2)),void 0==b||m==Array&&s(b))for(e=a(p.length),n=new m(e);e>_;_++)d=y?v(p[_],_):p[_],u(n,_,d);else for(h=b.call(p),f=h.next,n=new m;!(l=f.call(h)).done;_++)d=y?o(h,v,[l.value,_],!0):l.value,u(n,_,d);return n.length=_,n}},6062:function(t,e,n){"use strict";var i=n("6d61"),r=n("6566");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},6566:function(t,e,n){"use strict";var i=n("9bf2").f,r=n("7c73"),o=n("e2cc"),s=n("0366"),a=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),h=n("83ab"),f=n("f183").fastKey,d=n("69f3"),p=d.set,m=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,i){a(t,l,e),p(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=i&&u(i,t[c],{that:t,AS_ENTRIES:n})})),d=m(e),g=function(t,e,n){var i,r,o=d(t),s=v(t,e);return s?s.value=n:(o.last=s={index:r=f(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),h?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},v=function(t,e){var n,i=d(t),r=f(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){var t=this,e=d(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),i=v(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),h?n.size--:e.size--}return!!i},forEach:function(t){var e,n=d(this),i=s(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),o(l.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&i(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,n){var i=e+" Iterator",r=m(e),o=m(i);c(t,e,(function(t,e){p(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"6d61":function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("94ca"),s=n("6eeb"),a=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),h=n("d039"),f=n("1c7e"),d=n("d44e"),p=n("7156");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=m?"set":"add",y=r[t],b=y&&y.prototype,_=y,x={},k=function(t){var e=b[t];s(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(g||b.forEach&&!h((function(){(new y).entries().next()})))))_=n.getConstructor(e,t,m,v),a.REQUIRED=!0;else if(o(t,!0)){var w=new _,C=w[v](g?{}:-0,1)!=w,P=h((function(){w.has(1)})),O=f((function(t){new y(t)})),S=!g&&h((function(){var t=new y,e=5;while(e--)t[v](e,e);return!t.has(-0)}));O||(_=e((function(e,n){c(e,_,t);var i=p(new y,e,_);return void 0!=n&&u(n,i[v],{that:i,AS_ENTRIES:m}),i})),_.prototype=b,b.constructor=_),(P||S)&&(k("delete"),k("has"),m&&k("get")),(S||C)&&k(v),g&&b.clear&&delete b.clear}return x[t]=_,i({global:!0,forced:_!=y},x),d(_,t),g||n.setStrong(_,t,m),_}},"724f":function(t,e,n){"use strict";n("486d")},"857a":function(t,e,n){var i=n("1d80"),r=/"/g;t.exports=function(t,e,n,o){var s=String(i(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(o).replace(r,"&quot;")+'"'),a+">"+s+"</"+e+">"}},"9bdd":function(t,e,n){var i=n("825a"),r=n("2a62");t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(s){throw r(t),s}}},a623:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").every,o=n("a640"),s=n("ae40"),a=o("every"),u=s("every");i({target:"Array",proto:!0,forced:!a||!u},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),o=n("1c7e"),s=!o((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:s},{from:r})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,n){var i=n("83ab"),r=n("d039"),o=n("5135"),s=Object.defineProperty,a={},u=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,h=o(e,1)?e[1]:void 0;return a[t]=!!n&&!r((function(){if(c&&!i)return!0;var t={length:-1};c?s(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,h)}))}},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0c0:function(t,e,n){var i=n("83ab"),r=n("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,u="name";i&&!(u in o)&&r(o,u,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},b680:function(t,e,n){"use strict";var i=n("23e7"),r=n("a691"),o=n("408a"),s=n("1148"),a=n("d039"),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},h=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},f=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){u.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,n,i,a,u=o(this),f=r(t),d=[0,0,0,0,0,0],p="",m="0",g=function(t,e){var n=-1,i=e;while(++n<6)i+=t*d[n],d[n]=i%1e7,i=c(i/1e7)},v=function(t){var e=6,n=0;while(--e>=0)n+=d[e],d[e]=c(n/t),n=n%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==d[t]){var n=String(d[t]);e=""===e?n:e+s.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(p="-",u=-u),u>1e-21)if(e=h(u*l(2,69,1))-69,n=e<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,e=52-e,e>0){g(0,n),i=f;while(i>=7)g(1e7,0),i-=7;g(l(10,i,1),0),i=e-1;while(i>=23)v(1<<23),i-=23;v(1<<i),g(1,1),v(2),m=y()}else g(0,n),g(1<<-e,0),m=y()+s.call("0",f);return f>0?(a=m.length,m=p+(a<=f?"0."+s.call("0",f-a)+m:m.slice(0,a-f)+"."+m.slice(a-f))):m=p+m,m}})},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c9c4:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}var o=r((function(t,e){(function(){var e,n;n=function(e){return t.exports=e},e={linear:function(t,e,n,i){return n*t/i+e},easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var r,o,s;return s=1.70158,o=0,r=n,0===t||(t/=i),o||(o=.3*i),r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)+e},easeOutElastic:function(t,e,n,i){var r,o,s;return s=1.70158,o=0,r=n,0===t||(t/=i),o||(o=.3*i),r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/o)+n+e},easeInOutElastic:function(t,e,n,i){var r,o,s;return s=1.70158,o=0,r=n,0===t||(t/=i/2),o||(o=i*(.3*1.5)),r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)*.5+n+e},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,n,i,r){var o;return o=e.easeOutBounce(r-t,0,i,r),i-o+n},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,n,i,r){var o;return t<r/2?(o=e.easeInBounce(2*t,0,i,r),.5*o+n):(o=e.easeOutBounce(2*t-r,0,i,r),.5*o+.5*i+n)}},n(e)}).call(i)})),s=r((function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!==typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,o),!0;case 6:return l.fn.call(l.context,e,i,r,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,i);break;case 4:l[c].fn.call(l[c].context,e,i,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==e||r&&!a[u].once||i&&a[u].context!==i)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}));class a extends s{constructor(t,e,n){super(),this.elements=Array.isArray(t)?t:[t],this.eases=[],this.options=n||{},this.time=0;for(let i in e)for(let t of this.elements)this.addParam(t,i,e[i])}addParam(t,e,n){let i,r,o,s,u=e;switch(e){case"scaleX":case"skewX":u=e.substr(0,e.length-1),i=t[u].x,r=n,o=n-i,s=t=>this.updateCoord(t,u,"x");break;case"scaleY":case"skewY":u=e.substr(0,e.length-1),i=t[u].y,r=n,o=n-i,s=t=>this.updateCoord(t,u,"y");break;case"tint":case"blend":const c=Array.isArray(n)?n:[t.tint,n];i=0,r=c.length,o=r,s="tint"===e?t=>this.updateTint(t,c):t=>this.updateBlend(t,c);break;case"shake":i={x:t.x,y:t.y},r=n,s=t=>this.updateShake(t);break;case"position":i={x:t.x,y:t.y},r={x:n.x,y:n.y},o={x:r.x-i.x,y:r.y-i.y},s=t=>this.updatePosition(t);break;case"skew":case"scale":i=t[e].x,r=n,o=n-i,s=t=>this.updatePoint(t,e);break;case"face":i=t.rotation,r=a.shortestAngle(i,Math.atan2(n.y-t.y,n.x-t.x)),o=r-i,s=t=>this.updateOne(t,"rotation");break;default:i=t[e],r=n,o=n-i,s=t=>this.updateOne(t,e)}this.eases.push({element:t,entry:e,update:s,start:i,to:r,delta:o})}static shortestAngle(t,e){function n(t,e){return(t%e+e)%e}const i=2*Math.PI;let r=Math.abs(t-e)%i;r=r>Math.PI?i-r:r;const o=e-t,s=n(o+Math.PI,i)-Math.PI>0?1:-1;return r*s}remove(t,e){if(0===arguments.length)this.eases=[];else{"string"===typeof e&&(e=[e]);for(let n=0;n<this.eases.length;n++){const i=this.eases[n];t&&i.element!==t||e&&-1===e.indexOf(i.entry)||(this.eases.splice(n,1),n--)}}if(0===this.eases.length)return!0}updateOne(t,e){t.element[e]=this.options.ease(this.time,t.start,t.delta,this.options.duration)}updatePoint(t,e){t.element[e].x=t.element[e].y=this.options.ease(this.time,t.start,t.delta,this.options.duration)}updatePosition(t){t.element.x=this.options.ease(this.time,t.start.x,t.delta.x,this.options.duration),t.element.y=this.options.ease(this.time,t.start.y,t.delta.y,this.options.duration)}updateCoord(t,e,n){t.element[e][n]=this.options.ease(this.time,t.start,t.delta,this.options.duration)}updateTint(t,e){let n=Math.floor(this.options.ease(this.time,t.start,t.delta,this.options.duration));n===e.length&&(n=e.length-1),t.element.tint=e[n]}updateBlend(t,e){const n=this.options.ease(this.time,t.start,t.delta,this.options.duration);let i=Math.floor(n);i===e.length&&(i=e.length-1);let r=i+1;r===e.length&&(r=this.options.reverse?i-1:this.options.repeat?0:i);const o=n-i,s=e[i],a=e[r],u=s>>16,c=s>>8&255,l=255&s,h=a>>16,f=a>>8&255,d=255&a,p=1-o,m=p*u+o*h,g=p*c+o*f,v=p*l+o*d;t.element.tint=m<<16|g<<8|v}updateShake(t){function e(t){return Math.floor(Math.random()*t)-Math.floor(t/2)}t.element.x=t.start.x+e(t.to),t.element.y=t.start.y+e(t.to)}complete(t){"shake"===t.entry&&(t.element.x=t.start.x,t.element.y=t.start.y)}reverse(t){if("position"===t.entry){const e=t.to.x,n=t.to.y;t.to.x=t.start.x,t.to.y=t.start.y,t.start.x=e,t.start.y=n,t.delta.x=-t.delta.x,t.delta.y=-t.delta.y}else{const e=t.to;t.to=t.start,t.start=e,t.delta=-t.delta}}repeat(t){switch(t.entry){case"skewX":t.element.skew.x=t.start;break;case"skewY":t.element.skew.y=t.start;break;case"skew":t.element.skew.x=t.start,t.element.skew.y=t.start;break;case"scaleX":t.element.scale.x=t.start;break;case"scaleY":t.element.scale.y=t.start;break;case"scale":t.element.scale.x=t.start,t.element.scale.y=t.start;break;case"position":t.element.x=t.start.x,t.element.y=t.start.y;break;default:t.element[t.entry]=t.start}}update(t){if(0===this.eases.length)return!0;if(this.options.wait){if(this.options.wait-=t,this.options.wait>0)return void this.emit("wait",this);t=-this.options.wait,this.options.wait=0,this.emit("wait-end",this)}this.time+=t;let e=0;this.time>=this.options.duration&&(e=this.time-this.options.duration,this.time=this.options.duration);for(let n=0;n<this.eases.length;n++){const t=this.eases[n];t.element._destroyed?(this.eases.splice(n,1),n--):t.update(t)}if(this.emit("each",this),this.time>=this.options.duration)if(this.options.reverse)this.eases.forEach(t=>this.reverse(t)),this.time=e,e&&this.eases.forEach(t=>t.update(t)),this.emit("reverse",this),this.options.repeat?!0!==this.options.repeat&&this.options.repeat--:this.options.reverse=!1;else{if(!this.options.repeat)return this.eases.forEach(t=>this.complete(t)),this.emit("complete",this),!0;this.eases.forEach(t=>this.repeat(t)),this.time=e,e&&this.eases.forEach(t=>t.update(t)),!0!==this.options.repeat&&this.options.repeat--,this.emit("repeat",this)}}get count(){return this.eases.length}}const u={duration:1e3,ease:o.easeInOutSine,maxFrame:1e3/60,ticker:null,useRAF:!0};class c extends s{constructor(t){super(),this.options=Object.assign({},u,t),this.easings=[],this.empty=!0,this.options.ticker&&this.options.ticker.add(this.update,this)}destroy(){this.removeAll(),this.options.useTicker?this.ticker.remove(this.update,this):this.options.useRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null)}add(t,e,n){n=n||{},n.duration="undefined"!==typeof n.duration?n.duration:this.options.duration,n.ease=n.ease||this.options.ease,"string"===typeof n.ease&&(n.ease=o[n.ease]);const i=new a(t,e,n);return this.easings.push(i),this.empty&&this.options.useRAF&&(this.handleRAF=requestAnimationFrame(()=>this.update()),this.lastTime=Date.now()),this.empty=!1,i}target(t,e,n,i){const r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))/n;return i=i||{},i.duration=r,this.add(t,{x:e.x,y:e.y},i)}face(t,e,n,i){const r=a.shortestAngle(t.rotation,Math.atan2(e.y-t.y,e.x-t.x)),o=Math.abs(r-t.rotation)/n;return i=i||{},i.duration=o,this.add(t,{rotation:r},i)}removeEase(t,e){for(let n=0;n<this.easings.length;n++)this.easings[n].remove(t,e)&&(this.easings.splice(n,1),n--);0===this.easings.length&&(this.empty=!0,this.options.useRAF&&this.handleRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null))}removeAll(){this.easings=[],this.empty=!0,this.options.useRAF&&this.handleRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null)}update(t){if(this.options.useTicker)t=this.ticker.elapsedMS;else if(this.options.useRAF){const e=Date.now();t=e-this.lastTime,this.lastTime=e}if(t=Math.min(t,this.options.maxFrame),!this.empty){const e=this.easings.slice(0);for(let n of e)n.update(t)&&this.easings.splice(this.easings.indexOf(n),1);this.emit("each",this),0===this.easings.length&&(this.empty=!0,this.emit("complete",this))}this.options.useRAF&&this.easings.length?this.handleRAF=requestAnimationFrame(()=>this.update()):this.handleRAF=null}get count(){return this.easings.length}countRunning(){let t=0;for(let e of this.easings)t+=e.count;return t}set duration(t){this.options.duration=t}get duration(){return this.options.duration}set ease(t){this.options.ease=t}get ease(){return this.options.ease}}c.id=0;let l=new c;c.ease=l}).call(this,n("c8ba"))},da0b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("canvas",{ref:"canvasRef",staticClass:"canvas",attrs:{width:"1280",height:"720"}})])},r=[],o=n("ed09"),s=n("22a2"),a=(n("c0b6"),n("18a5"),n("d4ec")),u=n("bee2"),c=n("262e"),l=n("2caf"),h=n("c9c4"),f=(n("a623"),n("4160"),n("0d03"),n("d3b7"),n("25f0"),n("159b"),n("257e")),d=(n("ace4"),n("b680"),n("ac1f"),n("5319"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"),p="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += {{angleStep}}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n",m=function(t){var e=Math.max(t*g.MAX_SAMPLES,g.MIN_SAMPLES),n=(2*Math.PI/e).toFixed(7);return p.replace(/\{\{angleStep\}\}/,n)},g=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return Object(a["a"])(this,n),t=e.call(this,d,m(o)),t._thickness=1,t.uniforms.thickness=new Float32Array([0,0]),t.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(Object(f["a"])(t),{thickness:i,color:r,quality:o}),t}return Object(u["a"])(n,[{key:"apply",value:function(t,e,n,i){this.uniforms.thickness[0]=this._thickness/e._frame.width,this.uniforms.thickness[1]=this._thickness/e._frame.height,t.applyFilter(this,e,n,i)}},{key:"color",get:function(){return PIXI.utils.rgb2hex(this.uniforms.outlineColor)},set:function(t){PIXI.utils.hex2rgb(t,this.uniforms.outlineColor)}},{key:"thickness",get:function(){return this._thickness},set:function(t){this._thickness=t,this.padding=t}}]),n}(s["Filter"]);g.MIN_SAMPLES=1,g.MAX_SAMPLES=100;var v,y=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,PIXI.Texture.from("/arpg-sample/images/mikan/sara.png")),i.mikan=null,i.anchor.set(.5,.5),i.parentGroup=t,i}return Object(u["a"])(n,[{key:"showOutline",get:function(){return null!=this.filters&&this.filters.length>0},set:function(t){this.filters=t?[new g(4,15817250,1)]:[]}}]),n}(PIXI.Sprite),b="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",_="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy - vec2(0.5, 0.5)) * filterArea.xy / dimensions;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n",x=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,b,_),i.time=0,i.seed=0,i.uniforms.dimensions=new Float32Array(2),i.time=0,i.seed=0,Object.assign(Object(f["a"])(i),{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t),i}return Object(u["a"])(n,[{key:"apply",value:function(t,e,n,i){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,n,i)}},{key:"curvature",get:function(){return this.uniforms.curvature},set:function(t){this.uniforms.curvature=t}},{key:"lineWidth",get:function(){return this.uniforms.lineWidth},set:function(t){this.uniforms.lineWidth=t}},{key:"lineContrast",get:function(){return this.uniforms.lineContrast},set:function(t){this.uniforms.lineContrast=t}},{key:"verticalLine",get:function(){return this.uniforms.verticalLine},set:function(t){this.uniforms.verticalLine=t}},{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}},{key:"noiseSize",get:function(){return this.uniforms.noiseSize},set:function(t){this.uniforms.noiseSize=t}},{key:"vignetting",get:function(){return this.uniforms.vignetting},set:function(t){this.uniforms.vignetting=t}},{key:"vignettingAlpha",get:function(){return this.uniforms.vignettingAlpha},set:function(t){this.uniforms.vignettingAlpha=t}},{key:"vignettingBlur",get:function(){return this.uniforms.vignettingBlur},set:function(t){this.uniforms.vignettingBlur=t}}]),n}(s["Filter"]),k="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",w="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = 0.4;\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}",C=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,k,w),i.time=0,i.uniforms.amplitude=new Float32Array(2),i.uniforms.waveLength=new Float32Array(2),i.uniforms.alpha=new Float32Array(2),i.uniforms.dimensions=new Float32Array(2),Object.assign(Object(f["a"])(i),{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t),i}return Object(u["a"])(n,[{key:"apply",value:function(t,e,n,i){this.uniforms.dimensions[0]=e.filterFrame.width,this.uniforms.dimensions[1]=e.filterFrame.height,this.uniforms.time=this.time,t.applyFilter(this,e,n,i)}},{key:"mirror",get:function(){return this.uniforms.mirror},set:function(t){this.uniforms.mirror=t}},{key:"boundary",get:function(){return this.uniforms.boundary},set:function(t){this.uniforms.boundary=t}},{key:"amplitude",get:function(){return this.uniforms.amplitude},set:function(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]}},{key:"waveLength",get:function(){return this.uniforms.waveLength},set:function(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]}}]),n}(s["Filter"]),P=n("3835"),O=n("644d"),S=n("aa81"),A=n("e3e9");n("c29d");function F(){return v}var j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var E=function(){return(E=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},L=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid","caf"],I={};function T(t){var e=E({m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},t||{}),n=document.createElement("audio"),i={},r=/^no$/;L.forEach((function(t){var o=n.canPlayType("audio/".concat(t)).replace(r,""),s=e[t]?n.canPlayType(e[t]).replace(r,""):"";i[t]=!!o||!!s})),Object.assign(I,i)}T();var R=/\.(\{([^\}]+)\})(\?.*)?$/;function B(t){var e=R,n="string"==typeof t?t:t.url;if(!e.test(n))return n;for(var i=e.exec(n),r=i[2].split(","),o=r[r.length-1],s=0,a=r.length;s<a;s++){var u=r[s];if(I[u]){o=u;break}}var c=n.replace(i[1],o);if("string"!=typeof t){var l=t;l.extension=o,l.url=c}return c}var N=function(){function t(){}return t.add=function(){t.setLegacy(F().useLegacy)},t.setLegacy=function(t){var e=L;t?e.forEach((function(t){O["c"].setExtensionXhrType(t,O["c"].XHR_RESPONSE_TYPE.DEFAULT),O["c"].setExtensionLoadType(t,O["c"].LOAD_TYPE.AUDIO)})):e.forEach((function(t){O["c"].setExtensionXhrType(t,O["c"].XHR_RESPONSE_TYPE.BUFFER),O["c"].setExtensionLoadType(t,O["c"].LOAD_TYPE.XHR)}))},t.pre=function(t,e){B(t),e()},t.use=function(t,e){t.data&&L.indexOf(t.extension)>-1?t.sound=F().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),D=0,z=function(t){function e(e){var n=t.call(this)||this;return n.id=D++,n.init(e),n}return M(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name ".concat(t," does not exist."));switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*n*i,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",n))},e.prototype.play=function(t){var n=this,i=t.start,r=t.end,o=t.speed,s=t.loop,a=t.volume,u=t.muted;this._speed=o,this._volume=a,this._loop=!!s,this._muted=u,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=i,this._end=r||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){n._source&&(n._source.currentTime=i,n._source.onloadedmetadata=null,n.emit("progress",i,n._duration),A["a"].shared.add(n._onUpdate,n))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){A["a"].shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){A["a"].shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id=".concat(this.id,"]")},e.PADDING=.1,e}(S["EventEmitter"]),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new z(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),e.prototype.load=function(t){var e=this._source,n=this.parent;if(4!==e.readyState)if(n.url){e.src=n.url;var i=function(){s(),n.isLoaded=!0;var e=n.autoPlayStart();t&&t(null,n,e)},r=function(){s(),t&&t(new Error("Sound loading has been aborted"))},o=function(){s();var n="Failed to load audio element (code: ".concat(e.error.code,")");t&&t(new Error(n))},s=function(){e.removeEventListener("canplaythrough",i),e.removeEventListener("load",i),e.removeEventListener("abort",r),e.removeEventListener("error",o)};e.addEventListener("canplaythrough",i,!1),e.addEventListener("load",i,!1),e.addEventListener("abort",r,!1),e.addEventListener("error",o,!1),e.load()}else t(new Error("sound.url or sound.source must be set"));else{n.isLoaded=!0;var a=n.autoPlayStart();t&&setTimeout((function(){t(null,n,a)}),0)}},e}(S["EventEmitter"]),X=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),H=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var n=F().context;t.setValueAtTime(e,n.audioContext.currentTime)}else t.value=e;return e},t}(),q=0,Q=function(t){function e(e){var n=t.call(this)||this;return n.id=q++,n._media=null,n._paused=!1,n._muted=!1,n._elapsed=0,n.init(e),n}return M(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name ".concat(t," does not exist."));switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(t){var e;this._filters&&(null===(e=this._filters)||void 0===e||e.filter((function(t){return t})).forEach((function(t){return t.disconnect()})),this._filters=null,this._source.connect(this._gain)),this._filters=(null==t?void 0:t.length)?t.slice(0):null,this.refresh()},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);H.setParamValue(this._gain.gain,r*i*n),H.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}},e.prototype.applyFilters=function(){var t;if(null===(t=this._filters)||void 0===t?void 0:t.length){this._source.disconnect();var e=this._source;this._filters.forEach((function(t){e.connect(t.destination),e=t})),e.connect(this._gain)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",n))},e.prototype.play=function(t){var e=t.start,n=t.end,i=t.speed,r=t.loop,o=t.volume,s=t.muted,a=t.filters;this._paused=!1;var u=this._media.nodes.cloneBufferSource(),c=u.source,l=u.gain;this._source=c,this._gain=l,this._speed=i,this._volume=o,this._loop=!!r,this._muted=s,this._filters=a,this.refresh();var h=this._source.buffer.duration;this._duration=h,this._end=n,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=n,this._source.loopStart=e,this._source.start(0,e)):n?this._source.start(0,e,n-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)},e.prototype.enableTicker=function(t){A["a"].shared.remove(this._updateListener,this),t&&A["a"].shared.add(this._updateListener,this)},Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),null===(t=this._filters)||void 0===t||t.forEach((function(t){return t.disconnect()})),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id=".concat(this.id,"]")},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),n=e-this._lastUpdate;if(n>0||t){var i=this._source.playbackRate.value;this._elapsed+=n*i,this._lastUpdate=e;var r=this._duration,o=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%s)/r}else o=this._elapsed%r/r;this._progress=o,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){}this._source=null}},e.prototype._onComplete=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(S["EventEmitter"]),K=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var n=null;t.forEach((function(t){null===n?e._input.connect(t.destination):n.connect(t.destination),n=t})),n.connect(this._output)}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),V=function(t){function e(e){var n=this,i=e.audioContext,r=i.createBufferSource(),o=i.createGain(),s=i.createAnalyser();return r.connect(s),s.connect(o),o.connect(e.destination),(n=t.call(this,s,o)||this).context=e,n.bufferSource=r,n.gain=o,n.analyser=s,n}return M(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,H.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var n=this.context.audioContext.createGain();return e.connect(n),n.connect(this.destination),{source:e,gain:n}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!1,configurable:!0}),e.BUFFER_SIZE=0,e}(K),U=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new V(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){}this._source=null,this.source=null},t.prototype.create=function(){return new Q(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,n=new XMLHttpRequest,i=this.parent.url;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){e.source=n.response,e._decode(n.response,t)},n.send()},t.prototype._decode=function(t,e){var n=this,i=function(t,i){if(t)e&&e(t);else{n.parent.isLoaded=!0,n.buffer=i;var r=n.parent.autoPlayStart();e&&e(null,n.parent,r)}};t instanceof AudioBuffer?i(null,t):this.parent.context.decode(t,i)},t}(),W=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var n=e.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var n={};return"string"==typeof e?n.url=e:e instanceof ArrayBuffer||e instanceof AudioBuffer||e instanceof HTMLAudioElement?n.source=e:n=e,(n=E({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},n)).url&&(n.url=B(n.url)),Object.freeze(n),new t(F().useLegacy?new G:new U,n)},Object.defineProperty(t.prototype,"context",{get:function(){return F().context},enumerable:!1,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!1,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var n={};for(var i in t)n[i]=this.addSprites(i,t[i]);return n}var r=new X(this,e);return this._sprites[t]=r,r},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var n in this._sprites)this.removeSprites(n);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!1,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var n,i=this;if("string"==typeof t?n={sprite:o=t,loop:this.loop,complete:e}:"function"==typeof t?(n={}).complete=t:n=t,(n=E({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},n||{})).sprite){var r=n.sprite,o=this._sprites[r];n.start=o.start+(n.start||0),n.end=o.end,n.speed=o.speed||1,n.loop=o.loop||n.loop,delete n.sprite}if(n.offset&&(n.start=n.offset),!this.isLoaded)return new Promise((function(t,e){i.autoPlay=!0,i._autoPlayOptions=n,i._preload((function(i,r,o){i?e(i):(n.loaded&&n.loaded(i,r,o),t(o))}))}));(this.singleInstance||n.singleInstance)&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",(function(){n.complete&&n.complete(i),i._onComplete(s)})),s.once("stop",(function(){i._onComplete(s)})),s.play(n),s},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!1,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!1,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.muted=!1,e.volume=1,e.paused=!1,e}return M(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(S["EventEmitter"]),Z=function(t){function e(){var n=this,i=window,r=new e.AudioContext,o=r.createDynamicsCompressor(),s=r.createAnalyser();return s.connect(o),o.connect(r.destination),(n=t.call(this,s,o)||this)._ctx=r,n._offlineCtx=new e.OfflineAudioContext(1,2,i.OfflineAudioContext?r.sampleRate:44100),n._unlocked=!1,n.compressor=o,n.analyser=s,n.events=new S["EventEmitter"],n.volume=1,n.speed=1,n.muted=!1,n.paused=!1,"running"!==r.state&&(n._unlock(),n._unlock=n._unlock.bind(n),document.addEventListener("mousedown",n._unlock,!0),document.addEventListener("touchstart",n._unlock,!0),document.addEventListener("touchend",n._unlock,!0)),n}return M(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){var n=function(t){e(new Error(t.message||"Unable to decode file"))},i=this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),n);i&&i.catch(n)},e}(K),$=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new Z),this._htmlAudioContext=new Y,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==Z.AudioContext},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var n={};for(var i in t){var r=this._getOptions(t[i],e);n[i]=this.add(i,r)}return n}if(e instanceof W)return this._sounds[t]=e,e;var o=this._getOptions(e),s=W.from(o);return this._sounds[t]=s,s},t.prototype._getOptions=function(t,e){var n;return n="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?{source:t}:t,E(E({},n),e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){N.setLegacy(t),this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!1,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!1,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var n=this.find(t);return void 0!==e&&(n.volume=e),n.volume},t.prototype.speed=function(t,e){var n=this.find(t);return void 0!==e&&(n.speed=e),n.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),J=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),tt=(function(t){function e(n,i,r,o,s,a,u,c,l,h){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=0),void 0===h&&(h=0);var f=this;if(!F().useLegacy){var d=[{f:e.F32,type:"lowshelf",gain:n},{f:e.F64,type:"peaking",gain:i},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:s},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:u},{f:e.F4K,type:"peaking",gain:c},{f:e.F8K,type:"peaking",gain:l},{f:e.F16K,type:"highshelf",gain:h}].map((function(t){var e=F().context.audioContext.createBiquadFilter();return e.type=t.type,H.setParamValue(e.Q,1),e.frequency.value=t.f,H.setParamValue(e.gain,t.gain),e}));(f=t.call(this,d[0],d[d.length-1])||this).bands=d,f.bandsMap={};for(var p=0;p<f.bands.length;p++){var m=f.bands[p];p>0&&f.bands[p-1].connect(m),f.bandsMap[m.frequency.value]=m}return f}f=t.call(this,null)||this}M(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency ".concat(t));H.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency ".concat(t));return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){H.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3}(J),function(t){function e(e){void 0===e&&(e=0);var n=this;if(!F().useLegacy){var i=F().context.audioContext.createWaveShaper();return(n=t.call(this,i)||this)._distortion=i,n.amount=e,n}n=t.call(this,null)||this}M(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){this._amount=t;for(var e,n=1e3*t,i=44100,r=new Float32Array(i),o=Math.PI/180,s=0;s<i;++s)e=2*s/i-1,r[s]=(3+n)*e*20*o/(Math.PI+n*Math.abs(e));this._distortion.curve=r,this._distortion.oversample="4x"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)}}(J),function(t){function e(e){void 0===e&&(e=0);var n=this;if(!F().useLegacy){var i,r,o,s=F().context.audioContext;return s.createStereoPanner?o=i=s.createStereoPanner():((r=s.createPanner()).panningModel="equalpower",o=r),(n=t.call(this,o)||this)._stereo=i,n._panner=r,n.pan=e,n}n=t.call(this,null)||this}M(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?H.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null}}(J),function(t){function e(e,n,i){void 0===e&&(e=3),void 0===n&&(n=2),void 0===i&&(i=!1);var r=this;if(!F().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(n,0,100),r._reverse=i,r._rebuild(),r;r=t.call(this,null)||this}M(e,t),e.prototype._clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!1,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=F().context.audioContext,n=e.sampleRate,i=n*this._seconds,r=e.createBuffer(2,i,n),o=r.getChannelData(0),s=r.getChannelData(1),a=0;a<i;a++)t=this._reverse?i-a:a,o[a]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay),s[a]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay);var u=F().context.audioContext.createConvolver();u.buffer=r,this.init(u)}}(J),function(t){function e(){var e=this;if(!F().useLegacy){var n=F().context.audioContext,i=n.createChannelSplitter(),r=n.createChannelMerger();return r.connect(i),(e=t.call(this,r,i)||this)._merger=r,e}e=t.call(this,null)||this}M(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)}}(J),function(t){function e(){var e=this;if(!F().useLegacy){var n=F().context.audioContext,i=n.createMediaStreamDestination(),r=n.createMediaStreamSource(i.stream);return(e=t.call(this,i,r)||this)._stream=i.stream,e}e=t.call(this,null)||this}M(e,t),Object.defineProperty(e.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._stream=null,t.prototype.destroy.call(this)}}(J),function(t){function e(){if(!F().useLegacy){var e=F().context.audioContext,n=e.createBiquadFilter(),i=e.createBiquadFilter(),r=e.createBiquadFilter(),o=e.createBiquadFilter();return n.type="lowpass",H.setParamValue(n.frequency,2e3),i.type="lowpass",H.setParamValue(i.frequency,2e3),r.type="highpass",H.setParamValue(r.frequency,500),o.type="highpass",H.setParamValue(o.frequency,500),n.connect(i),i.connect(r),r.connect(o),t.call(this,n,o)||this}t.call(this,null)}M(e,t)}(J),function(t){return v=t,t}(new $));O["b"].registerPlugin(N);var et=!1,nt=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t,i,r,o,s,u,c){var l;Object(a["a"])(this,n),l=e.call(this),l.index=i,l.movedCallback=u,l.droppedCallback=c,l.dragStartCursorPoint=null,l.dragStartPoint=null,l.touched=!1,l.sprite=PIXI.Sprite.from("/arpg-sample/images/mikan/mikan.png"),l.sprite.anchor.set(.5,.65),l.sprite.parentGroup=t,l.addChild(l.sprite);var h=new PIXI.Graphics;h.parentGroup=t,h.beginFill(0),h.alpha=.5,h.drawEllipse(0,8,74,40),h.endFill(),h.zOrder=0,l.addChild(h);var f=new PIXI.filters.ColorMatrixFilter;f.hue(r,!1);var d=new PIXI.filters.ColorMatrixFilter;d.saturate(o,!1);var p=new PIXI.filters.ColorMatrixFilter;return p.brightness(s,!1),l.sprite.filters=[f,d,p],l.updateZOrder(),l.setHitArea(!1),l.interactive=!0,l.on("touchstart",l.onTouchStart).on("mousedown",l.onTouchStart).on("touchend",l.onTouchEnd).on("mouseup",l.onTouchEnd).on("touchcancel",l.onTouchEnd).on("touchendoutside",l.onTouchEnd).on("mouseout",l.onTouchEnd),l.startDropMotion(),l}return Object(u["a"])(n,[{key:"startDropMotion",value:function(){this.sprite.y=-800;var t=h["a"].add(this.sprite,{y:0},{wait:100*Math.random(),duration:400});t.once("complete",(function(){console.log("dropped"),tt.play("drop")}))}},{key:"setHitArea",value:function(t){var e=t?[-240,-255,480,480]:[-80,-85,160,120],n=Object(P["a"])(e,4),i=n[0],r=n[1],o=n[2],s=n[3];if(this.hitArea=new PIXI.Rectangle(i,r,o,s),et){var a=new PIXI.Graphics;a.beginFill(16711680),a.alpha=.5,a.drawRect(i,r,o,s),a.endFill(),this.addChild(a)}}},{key:"onTouchStart",value:function(t){this.touched=!0,this.setHitArea(!0),h["a"].removeEase(this.sprite),this.dragStartPoint=new PIXI.Point(this.x,this.y),this.dragStartCursorPoint=new PIXI.Point(t.data.global.x,t.data.global.y),h["a"].add(this.sprite,{scale:1.1,alpha:.8},{duration:80,ease:"easeOutQuad"}),this.on("touchmove",this.onTouchMove).on("mousemove",this.onTouchMove),this.sprite.zOrder=this.zIndex=1e4}},{key:"onTouchEnd",value:function(){var t=this;if(this.touched){this.touched=!1,this.setHitArea(!1),this.dragStartCursorPoint=this.dragStartPoint=null;var e=h["a"].add(this.sprite,{scale:1,alpha:1},{duration:80,ease:"easeOutQuad"});e.once("complete",(function(){return t.droppedCallback(t)})),this.removeListener("touchmove",this.onTouchMove,this),this.removeListener("mousemove",this.onTouchMove,this),this.zIndex=0,this.updateZOrder()}}},{key:"onTouchMove",value:function(t){if(null!=this.dragStartCursorPoint&&null!=this.dragStartPoint){var e=new PIXI.Point(t.data.global.x-this.dragStartCursorPoint.x,t.data.global.y-this.dragStartCursorPoint.y);this.x=this.dragStartPoint.x+e.x,this.y=this.dragStartPoint.y+e.y,this.movedCallback(this)}}},{key:"updateZOrder",value:function(){this.sprite.zOrder=this.zIndex=this.y}}]),n}(PIXI.Container),it=(n("6062"),n("3ca3"),n("ddb0"),function(t){return t<=5?[4,5]:t<=7?[6,7]:t<=9?[8,9]:t<=11?[10,11]:t<=13?[6,8]:t<=15?[9,12]:t<=17?[13,15]:t<=19?[16,17]:[18,100]}),rt=function(t){var e=0;if(e+=2*(t.mikanNum-3),null!=t.startH&&null!=t.endH){var n=t.endH-t.startH;n<=40?e+=1:n<=30?e+=2:n<=20&&(e+=3)}if(null!=t.startS&&null!=t.endS){var i=Math.abs(t.endS-t.startS);i<=.7?e+=3:i<=.5?e+=5:i<=.3&&(e+=7)}if(null!=t.startB&&null!=t.endB){var r=Math.abs(t.endB-t.startB);r<=.6?e+=2:r<=.4?e+=4:r<=.2&&(e+=6)}if(null!=t.filterTypes){var o=new Set(t.filterTypes);o.has("crt")&&(e+=2),o.has("noise")&&(e+=4),o.has("blur")&&(e+=4),o.has("refrection")&&(e+=5),o.has("spotlight")&&(e+=6)}return e},ot=function(){var t=0;switch(Math.floor(4*Math.random())){case 0:t=50;break;case 1:t=40;break;case 2:t=30;break;case 3:t=20;break}var e=0;return Math.random()<.5&&(e=Math.floor(300*Math.random())),[0+e,t+e]},st=function(){switch(Math.floor(4*Math.random())){case 0:return[0,-.9];case 1:return[0,-.7];case 2:return[-.1,-.6];case 3:return[-.2,-.5]}throw new Error},at=function(){switch(Math.floor(4*Math.random())){case 0:return[.5,1.5];case 1:return[.7,1.3];case 2:return[.8,1.2];case 3:return[.9,1.1]}throw new Error},ut=function(){var t=4+Math.floor(4*Math.random()),e=void 0,n=void 0,i=void 0,r=void 0,o=void 0,s=void 0;if(Math.random()<.7){var a=ot(),u=Object(P["a"])(a,2);e=u[0],n=u[1]}if(Math.random()<.4){var c=st(),l=Object(P["a"])(c,2);i=l[0],r=l[1]}if(Math.random()<.3){var h=at(),f=Object(P["a"])(h,2);o=f[0],s=f[1]}if(null==e&&null==i&&null==o){var d=ot(),p=Object(P["a"])(d,2);e=p[0],n=p[1]}var m=[];return Math.random()<.2&&m.push("crt"),Math.random()<.2&&m.push("noise"),Math.random()<.2&&m.push("blur"),Math.random()<.2&&m.push("refrection"),Math.random()<.2&&m.push("spotlight"),{mikanNum:t,startH:e,endH:n,startS:i,endS:r,startB:o,endB:s,filterTypes:m}},ct=function(t){for(var e=it(t),n=0;n<1e3;++n){var i=ut(),r=rt(i);if(console.log("difficality = ".concat(r)),e[0]<=r&&r<=e[1])return i}throw new Error},lt=function(t){return 0===t?{mikanNum:4,startH:0,endH:40}:1===t?{mikanNum:5,startH:0,endH:40}:2===t?{mikanNum:4,startS:0,endS:-.9}:3===t?{mikanNum:4,startH:0,endH:40,filterTypes:["crt"]}:ct(t)},ht=(n("4795"),function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,PIXI.Texture.from(t)),i.clicked=null,i.anchor.set(.5,.5),i.interactive=!0,i.on("touchstart",i.onPress).on("mousedown",i.onPress).on("touchend",i.onClick).on("mouseup",i.onClick).on("touchcancel",i.onRelease).on("touchendoutside",i.onRelease).on("mouseout",i.onRelease),i}return Object(u["a"])(n,[{key:"onPress",value:function(){this.scale.set(1.1)}},{key:"onRelease",value:function(){this.scale.set(1)}},{key:"onClick",value:function(){var t=this;this.scale.set(1),setTimeout((function(){null!=t.clicked&&t.clicked()}),50)}}]),n}(PIXI.Sprite)),ft=2400,dt=300,pt=1280,mt=720,gt=function(t){return t>12?1.5*dt:dt},vt=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;Object(a["a"])(this,n),t=e.call(this),t.gaugeAngle=360,t.gaugeRecoverAngle=0,t.lv=1,t.addChild(s["Sprite"].from("/arpg-sample/images/mikan/gauge_bg.png"));var i=new s["Container"];i.addChild(s["Sprite"].from("/arpg-sample/images/mikan/gauge.png"));var r=new s["Container"];r.addChild(s["Sprite"].from("/arpg-sample/images/mikan/gauge_recover.png")),t.addChild(r),t.addChild(i),t.addChild(s["Sprite"].from("/arpg-sample/images/mikan/gauge_fg.png")),t.gaugeMask=new s["Graphics"],i.addChild(t.gaugeMask),i.mask=t.gaugeMask,t.gaugeRecoverMask=new s["Graphics"],r.addChild(t.gaugeRecoverMask),r.mask=t.gaugeRecoverMask;var o=new s["Text"]("LV",{fontSize:30,fill:4473924,align:"center"});return o.anchor.set(.5,.5),o.x=90,o.y=54,t.addChild(o),t.lvNumText=new s["Text"](t.lv.toString(),{fontSize:60,fill:4473924,align:"center"}),t.lvNumText.anchor.set(.5,.5),t.lvNumText.x=90,t.lvNumText.y=100,t.addChild(t.lvNumText),t}return Object(u["a"])(n,[{key:"refresh",value:function(){this.gaugeMask.clear(),this.gaugeMask.beginFill(16711680).moveTo(90,90).arc(90,90,100,Math.PI/180*-90,Math.PI/180*(this.gaugeAngle-90),!1).endFill(),this.gaugeRecoverMask.clear(),this.gaugeRecoverMask.beginFill(16711680).moveTo(90,90).arc(90,90,100,Math.PI/180*-90,Math.PI/180*(this.gaugeRecoverAngle-90),!1).endFill(),this.lvNumText.text=this.lv.toString()}}]),n}(s["Container"]),yt=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t,i){var r;return Object(a["a"])(this,n),r=e.call(this),r.clearAnimationCompleteCallback=t,r.timeupDialogFinishedCallback=i,r.animationLock=!1,r.gauge=new vt,r.gauge.position.set(1080,20),r.addChild(r.gauge),r}return Object(u["a"])(n,[{key:"restTimeRate",set:function(t){this.animationLock||(t=Math.max(0,t),this.gauge.gaugeAngle=360*t,this.gauge.refresh())}},{key:"lv",set:function(t){this.gauge.lv=t}},{key:"showTimeupDialog",value:function(t){var e=s["Sprite"].from("/arpg-sample/images/mikan/timeup.png");e.anchor.set(.5,.5),e.position.set(pt/2,296),e.scale.set(0),h["a"].add(e,{scale:1},{duration:120,ease:"easeOutQuad"}),h["a"].add(e,{y:304},{wait:120,repeat:-1,reverse:!0,duration:800,ease:"easeInOutQuad"}),this.addChild(e);var n=new ht("/arpg-sample/images/mikan/btn_finish.png");n.x=1100,n.y=640,this.addChild(n),n.clicked=this.timeupDialogFinishedCallback}},{key:"showClearAnimation",value:function(t){var e=this,n=s["Sprite"].from("/arpg-sample/images/mikan/clear.png");n.anchor.set(.5,.5),n.position.set(pt/2,296),n.scale.set(0),h["a"].add(n,{scale:1},{duration:120,ease:"easeOutQuad"});var i=h["a"].add(n,{y:304},{wait:120,repeat:1,reverse:!0,duration:800,ease:"easeInOutQuad"}),r=0,o=gt(t)/ft*360/80;this.animationLock=!0,i.on("each",(function(t){r<80&&(e.gauge.gaugeAngle+=o,e.gauge.refresh(),r++)})),i.once("complete",(function(){e.animationLock=!1,n.parent.removeChild(n),e.clearAnimationCompleteCallback(),e.gauge.gaugeRecoverAngle=0})),this.addChild(n),this.gauge.gaugeRecoverAngle=this.gauge.gaugeAngle+gt(t)/ft*360}}]),n}(s["Container"]),bt=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this),i.clearCallback=t,i.frameCount=0,i.saraList=[],i.mikanList=[],i.spotlightContainer=null,i.paused=!1,i}return Object(u["a"])(n,[{key:"getNearestSara",value:function(t){for(var e=0;e<this.saraList.length;++e){var n=Math.sqrt(Math.pow(this.saraList[e].x-t.x,2)+Math.pow(this.saraList[e].y-t.y,2));if(n<100){var i=this.saraList[e];if(null===i.mikan)return i}}return null}},{key:"mikanMoved",value:function(t){var e=this.getNearestSara(t);this.saraList.forEach((function(n){e!==n&&(n.showOutline=!1),n.mikan===t&&(n.mikan=null)})),null==e||e.showOutline||(e.showOutline=!0)}},{key:"mikanDropped",value:function(t){var e=this.getNearestSara(t);null!=e&&(t.x=e.x,t.y=e.y,e.mikan=t,tt.play("set")),this.saraList.forEach((function(t){return t.showOutline=!1})),this.checkClear()}},{key:"initialize",value:function(){this.container=new s["Container"],this.addChild(this.container),this.container.sortableChildren=!0,this.group=new s["display"].Group(0,!0);var t=new s["display"].Layer(this.group);this.container.addChild(t),this.bg=s["Sprite"].from("/arpg-sample/images/mikan/dohyou.png"),this.bg.y=-520,this.bg.parentGroup=this.group,this.bg.zIndex=0,this.container.addChild(this.bg)}},{key:"nextStage",value:function(t){var e=this;this.saraList.forEach((function(t){return e.container.removeChild(t)})),this.saraList.length=0,this.mikanList.forEach((function(t){return e.container.removeChild(t)})),this.mikanList.length=0;for(var n=pt/2-160*(t.mikanNum-1)/2,i=0;i<t.mikanNum;++i){var r=0;null!=t.startH&&null!=t.endH&&(r=t.startH+(t.endH-t.startH)*(i/(t.mikanNum-1)));var o=0;null!=t.startS&&null!=t.endS&&(o=t.startS+(t.endS-t.startS)*(i/(t.mikanNum-1)));var s=1;null!=t.startB&&null!=t.endB&&(s=t.startB+(t.endB-t.startB)*(i/(t.mikanNum-1)));var a=new nt(this.group,i,r,o,s,this.mikanMoved.bind(this),this.mikanDropped.bind(this));a.x=240+800*Math.random(),a.y=150+350*Math.random(),a.updateZOrder(),this.container.addChild(a),this.mikanList.push(a);var u=new y(this.group);u.x=n+160*i,u.y=560,this.container.addChild(u),this.saraList.push(u)}null!=t.filterTypes&&t.filterTypes.forEach((function(t){switch(t){case"crt":e.addCrtFilter();break;case"blur":e.addBlurFilter();break;case"noise":e.addNoiseFilter();break;case"refrection":e.addReflectionFilter();break;case"spotlight":e.addSpotlightFilter();break}}))}},{key:"addReflectionFilter",value:function(){var t=new C({mirror:!1,boundary:0});this.addFilter(t)}},{key:"addCrtFilter",value:function(){var t=new x({lineWidth:3,noise:.3,noiseSize:1.2});this.addFilter(t)}},{key:"addBlurFilter",value:function(){this.addFilter(new s["filters"].BlurFilter(4,2))}},{key:"addNoiseFilter",value:function(){this.addFilter(new s["filters"].NoiseFilter(1.5))}},{key:"addSpotlightFilter",value:function(){this.spotlightContainer=new s["Container"];var t=new s["Graphics"];t.beginFill(0).drawRect(-1156,-556,900,1112).drawRect(256,-556,900,1112).drawRect(-256,-556,512,300).drawRect(-256,256,512,300).endFill(),this.spotlightContainer.addChild(t);var e=s["Sprite"].from("/arpg-sample/images/mikan/spotlight.png");e.anchor.set(.5,.5),this.spotlightContainer.addChild(e),this.spotlightContainer.x=pt/2-430,this.spotlightContainer.y=mt/2-140,h["a"].add(this.spotlightContainer,{x:pt/2+430},{repeat:-1,reverse:!0,duration:4e3,ease:"linear"}),h["a"].add(this.spotlightContainer,{y:mt/2+140},{repeat:-1,reverse:!0,duration:900,ease:"linear"}),this.addChild(this.spotlightContainer)}},{key:"addFilter",value:function(t){null==this.container.filters&&(this.container.filters=[]),this.container.filters.push(t)}},{key:"clearFilters",value:function(){null!=this.spotlightContainer&&(this.removeChild(this.spotlightContainer),this.spotlightContainer=null),this.container.filters=[]}},{key:"checkClear",value:function(){if(!this.paused&&this.saraList.every((function(t){return null!=t.mikan}))){for(var t=!0,e=!0,n=0,i=this.saraList.length-1;n<this.saraList.length;++n,--i)this.saraList[n].mikan.index!==n&&(t=!1),this.saraList[n].mikan.index!==i&&(e=!1);(t||e)&&(this.clearCallback(),this.clearFilters())}}},{key:"update",value:function(){var t=this;null!=this.container.filters&&this.container.filters.forEach((function(e){e instanceof C?e.time+=.1:e instanceof x?(e.seed=Math.random(),e.time+=.5):e instanceof s["filters"].NoiseFilter?e.seed=Math.random():e instanceof s["filters"].BlurFilter&&(t.frameCount%240<120?(e.blurXFilter.strength+=.06,e.blurYFilter.strength+=.06):(e.blurXFilter.strength-=.06,e.blurYFilter.strength-=.06))})),++this.frameCount}}]),n}(s["Container"]),_t=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;Object(a["a"])(this,n),t=e.call(this),t.stageNum=0,t.restFrameCount=ft,t.stopTimer=!1,t.gameOver=!1,t.stageLayer=new bt(t.onClear.bind(Object(f["a"])(t))),t.addChild(t.stageLayer),t.stageLayer.initialize(),t.uiLayer=new yt(t.onClearAnimationComplete.bind(Object(f["a"])(t)),t.onTimeupDialogFinished.bind(Object(f["a"])(t))),t.addChild(t.uiLayer);var i=lt(t.stageNum);return console.dir(i),t.stageLayer.nextStage(i),s["Ticker"].shared.add(t.update,Object(f["a"])(t)),tt.add("clear","/arpg-sample/sounds/quiz1.wav"),tt.add("set","/arpg-sample/sounds/cursor_01.wav"),tt.add("drop","/arpg-sample/sounds/drop3.mp3"),t}return Object(u["a"])(n,[{key:"update",value:function(t){this.stageLayer.update(),this.gameOver||(this.stopTimer||(this.restFrameCount-=t),this.uiLayer.restTimeRate=this.restFrameCount/ft,this.restFrameCount<=0&&(this.uiLayer.showTimeupDialog(this.stageNum),this.stopTimer=!0,this.gameOver=!0,this.stageLayer.paused=!0))}},{key:"onTimeupDialogFinished",value:function(){s["Ticker"].shared.remove(this.update,this),window.app.stage.removeChildren(),window.app.stage.addChild(new xt)}},{key:"onClear",value:function(){this.stageLayer.paused=!0,this.uiLayer.showClearAnimation(this.stageNum),this.stopTimer=!0,tt.play("clear")}},{key:"onClearAnimationComplete",value:function(){this.stageLayer.paused=!1,++this.stageNum,this.restFrameCount=Math.min(this.restFrameCount+gt(this.stageNum),ft),this.uiLayer.lv=this.stageNum+1;var t=lt(this.stageNum);console.dir(t),this.stageLayer.nextStage(t),this.stopTimer=!1}}]),n}(s["Container"]),xt=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.call(this),t.initialize(),t}return Object(u["a"])(n,[{key:"initialize",value:function(){this.sortableChildren=!0,this.group=new s["display"].Group(0,!0);var t=new s["display"].Layer(this.group);this.addChild(t),this.bg=s["Sprite"].from("/arpg-sample/images/mikan/dohyou.png"),this.bg.parentGroup=this.group,this.bg.zIndex=0,this.addChild(this.bg),this.fg=s["Sprite"].from("/arpg-sample/images/mikan/yane.png"),this.fg.anchor.x=.5,this.fg.x=640,this.fg.parentGroup=this.group,this.fg.zIndex=100,this.addChild(this.fg),this.startOpening()}},{key:"startOpening",value:function(){h["a"].add(this.bg,{y:-560},{duration:9e3,ease:"linear"}),h["a"].add(this.fg,{y:-780},{duration:9e3,ease:"linear"});var t=s["Sprite"].from("/arpg-sample/images/mikan/title_a.png");t.position.set(50,50);var e=s["Sprite"].from("/arpg-sample/images/mikan/title_b.png");e.position.set(1e3,124),this.addChild(t),this.addChild(e);var n=new ht("/arpg-sample/images/mikan/btn_start.png");n.x=640,n.y=450,this.addChild(n),n.clicked=this.onTouchStart.bind(this);var i=new ht("/arpg-sample/images/mikan/btn_howto.png");i.x=640,i.y=600,this.addChild(i)}},{key:"onTouchStart",value:function(){window.app.stage.removeChildren(),window.app.stage.addChild(new _t)}}]),n}(s["Container"]),kt=Object(o["b"])({props:{},components:{},setup:function(t,e){var n=Object(o["d"])();return Object(o["c"])((function(){var t=new s["Application"]({width:1280,height:720,view:n.value,transparent:!0,autoStart:!0});t.ticker.maxFPS=60,t.ticker.minFPS=60,t.stage=new s["display"].Stage;var e=new xt;t.stage.addChild(e),window.app=t})),{canvasRef:n}}}),wt=kt,Ct=(n("724f"),n("2877")),Pt=Object(Ct["a"])(wt,i,r,!1,null,"d5a693fa",null);e["default"]=Pt.exports},f183:function(t,e,n){var i=n("d012"),r=n("861d"),o=n("5135"),s=n("9bf2").f,a=n("90e3"),u=n("bb2f"),c=a("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){s(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},p=function(t,e){if(!o(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},m=function(t){return u&&g.REQUIRED&&h(t)&&!o(t,c)&&f(t),t},g=t.exports={REQUIRED:!1,fastKey:d,getWeakData:p,onFreeze:m};i[c]=!0},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("861d"),o=n("e8b5"),s=n("23cb"),a=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),h=n("1dde"),f=n("ae40"),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),g=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,i,l,h=u(this),f=a(h.length),d=s(t,f),p=s(void 0===e?f:e,f);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(h,d,p);for(i=new(void 0===n?Array:n)(v(p-d,0)),l=0;d<p;d++,l++)d in h&&c(i,l,h[d]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-10d39fcc.5fed0a33.js.map