(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ac5b682"],{1219:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a630"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0");var i=n("d4ec"),a=n("bee2"),r=function(){function e(){Object(i["a"])(this,e),this.lastPressedKeyCodeSet=new Set,this.nowPressedKeyCodeSet=new Set}return Object(a["a"])(e,[{key:"onKeyDown",value:function(e){this.nowPressedKeyCodeSet.add(e)}},{key:"onKeyUp",value:function(e){this.nowPressedKeyCodeSet["delete"](e)}},{key:"endTurn",value:function(){this.lastPressedKeyCodeSet=new Set(Array.from(this.nowPressedKeyCodeSet))}},{key:"isPressing",value:function(e){return this.nowPressedKeyCodeSet.has(e)}},{key:"isPressed",value:function(e){return this.nowPressedKeyCodeSet.has(e)&&!this.lastPressedKeyCodeSet.has(e)}},{key:"isReleased",value:function(e){return!this.nowPressedKeyCodeSet.has(e)&&this.lastPressedKeyCodeSet.has(e)}},{key:"reset",value:function(){this.lastPressedKeyCodeSet.clear(),this.nowPressedKeyCodeSet.clear()}}]),e}()},"159b":function(e,t,n){var i=n("da84"),a=n("fdbc"),r=n("17c2"),s=n("9112");for(var o in a){var u=i[o],c=u&&u.prototype;if(c&&c.forEach!==r)try{s(c,"forEach",r)}catch(l){c.forEach=r}}},"17c2":function(e,t,n){"use strict";var i=n("b727").forEach,a=n("a640"),r=n("ae40"),s=a("forEach"),o=r("forEach");e.exports=s&&o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"18a5":function(e,t,n){"use strict";var i=n("23e7"),a=n("857a"),r=n("af03");i({target:"String",proto:!0,forced:r("anchor")},{anchor:function(e){return a(this,"a","name",e)}})},4160:function(e,t,n){"use strict";var i=n("23e7"),a=n("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4de4":function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").filter,r=n("1dde"),s=n("ae40"),o=r("filter"),u=s("filter");i({target:"Array",proto:!0,forced:!o||!u},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var i=n("0366"),a=n("7b0b"),r=n("9bdd"),s=n("e95a"),o=n("50c4"),u=n("8418"),c=n("35a1");e.exports=function(e){var t,n,l,d,h,p,g=a(e),f="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,v=void 0!==b,y=c(g),x=0;if(v&&(b=i(b,m>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(t=o(g.length),n=new f(t);t>x;x++)p=v?b(g[x],x):g[x],u(n,x,p);else for(d=y.call(g),h=d.next,n=new f;!(l=h.call(d)).done;x++)p=v?r(d,b,[l.value,x],!0):l.value,u(n,x,p);return n.length=x,n}},6062:function(e,t,n){"use strict";var i=n("6d61"),a=n("6566");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,n){"use strict";var i=n("9bf2").f,a=n("7c73"),r=n("e2cc"),s=n("0366"),o=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),d=n("83ab"),h=n("f183").fastKey,p=n("69f3"),g=p.set,f=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,i){o(e,l,t),g(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=i&&u(i,e[c],{that:e,AS_ENTRIES:n})})),p=f(t),m=function(e,t,n){var i,a,r=p(e),s=b(e,t);return s?s.value=n:(r.last=s={index:a=h(t,!0),key:t,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=s),i&&(i.next=s),d?r.size++:e.size++,"F"!==a&&(r.index[a]=s)),e},b=function(e,t){var n,i=p(e),a=h(t);if("F"!==a)return i.index[a];for(n=i.first;n;n=n.next)if(n.key==t)return n};return r(l.prototype,{clear:function(){var e=this,t=p(e),n=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=p(t),i=b(t,e);if(i){var a=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=a),a&&(a.previous=r),n.first==i&&(n.first=a),n.last==i&&(n.last=r),d?n.size--:t.size--}return!!i},forEach:function(e){var t,n=p(this),i=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),r(l.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&i(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(e,t,n){var i=t+" Iterator",a=f(t),r=f(i);c(e,t,(function(e,t){g(this,{type:i,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"6d61":function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("94ca"),s=n("6eeb"),o=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),d=n("d039"),h=n("1c7e"),p=n("d44e"),g=n("7156");e.exports=function(e,t,n){var f=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),b=f?"set":"add",v=a[e],y=v&&v.prototype,x=v,w={},k=function(e){var t=y[e];s(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(r(e,"function"!=typeof v||!(m||y.forEach&&!d((function(){(new v).entries().next()})))))x=n.getConstructor(t,e,f,b),o.REQUIRED=!0;else if(r(e,!0)){var C=new x,S=C[b](m?{}:-0,1)!=C,E=d((function(){C.has(1)})),L=h((function(e){new v(e)})),I=!m&&d((function(){var e=new v,t=5;while(t--)e[b](t,t);return!e.has(-0)}));L||(x=t((function(t,n){c(t,x,e);var i=g(new v,t,x);return void 0!=n&&u(n,i[b],{that:i,AS_ENTRIES:f}),i})),x.prototype=y,y.constructor=x),(E||I)&&(k("delete"),k("has"),f&&k("get")),(I||S)&&k(b),m&&y.clear&&delete y.clear}return w[e]=x,i({global:!0,forced:x!=v},w),p(x,e),m||n.setStrong(x,e,f),x}},"857a":function(e,t,n){var i=n("1d80"),a=/"/g;e.exports=function(e,t,n,r){var s=String(i(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),o+">"+s+"</"+t+">"}},"96cf":function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof m?t:m,r=Object.create(a.prototype),s=new M(i||[]);return r._invoke=E(e,n,s),r}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",f={};function m(){}function b(){}function v(){}var y={};y[r]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==n&&i.call(w,r)&&(y=w);var k=v.prototype=m.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,r,s,o){var u=l(e[a],e,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(u.arg)}var a;function r(e,i){function r(){return new t((function(t,a){n(e,i,t,a)}))}return a=a?a.then(r,r):r()}this._invoke=r}function E(e,t,n){var i=d;return function(a,r){if(i===p)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw r;return j()}n.method=a,n.arg=r;while(1){var s=n.delegate;if(s){var o=L(s,n);if(o){if(o===f)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=l(e,t,n);if("normal"===u.type){if(i=n.done?g:h,u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function L(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=l(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var r=a.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var n=e[r];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function n(){while(++a<e.length)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:j}}function j(){return{value:t,done:!0}}return b.prototype=k.constructor=v,v.constructor=b,b.displayName=u(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},C(S.prototype),S.prototype[s]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var s=new S(c(t,n,i,a),r);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(k),u(k,o,"Generator"),k[r]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=P,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(i,a){return o.type="throw",o.arg=e,n.next=i,a&&(n.method="next",n.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=i}catch(a){Function("r","regeneratorRuntime = r")(i)}},"9bdd":function(e,t,n){var i=n("825a"),a=n("2a62");e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(s){throw a(e),s}}},a3fd:function(e,t,n){},a630:function(e,t,n){var i=n("23e7"),a=n("4df4"),r=n("1c7e"),s=!r((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:s},{from:a})},a640:function(e,t,n){"use strict";var i=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,n){var i=n("83ab"),a=n("d039"),r=n("5135"),s=Object.defineProperty,o={},u=function(e){throw e};e.exports=function(e,t){if(r(o,e))return o[e];t||(t={});var n=[][e],c=!!r(t,"ACCESSORS")&&t.ACCESSORS,l=r(t,0)?t[0]:u,d=r(t,1)?t[1]:void 0;return o[e]=!!n&&!a((function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,l,d)}))}},af03:function(e,t,n){var i=n("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b74a:function(e){e.exports=JSON.parse('{"length":3200,"layout":[[575.5,201.5,"bl"],[504,201,"bl"],[359,200.5,"bl"],[431.5,197.5,"bl"],[730.7999999999925,199.5,"r"],[808.7999999999925,201.5,"r"],[881.7999999999925,203,"r"],[1012.5,199,"g"],[1172.5,198.5,"g"],[1090,197.5,"g"],[1546.9000000000199,197.5,"y"],[1636.4000000000199,197,"y"],[1715.9000000000199,196,"y"],[1831,197,"bl"],[1302.1999999999946,198.5,"b"],[1402.1999999999946,200,"b"],[2217,117,"bl"],[2650,127.5,"lb"],[2765.5,57,"w"],[2551,198,"p"],[1884.5,116,"bl"],[1947,37,"bl"],[2064.5,34.5,"bl"],[2164,32,"bl"],[2269.5,199,"bl"],[2375.500000000017,199,"bl"],[2846,89,"r"],[2883.5,132.5,"g"],[2926.5,180.5,"b"],[2986.5,128.5,"y"],[3046.5,73,"lb"],[3101.5,131.5,"p"],[3139.2000000000094,135,"bl"],[3175.7000000000094,137,"w"],[3209.7000000000094,140.5,"bl"],[3247.7000000000094,141.5,"w"]]}')},bb2f:function(e,t,n){var i=n("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d81d:function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").map,r=n("1dde"),s=n("ae40"),o=r("map"),u=s("map");i({target:"Array",proto:!0,forced:!o||!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e177f:function(e,t,n){"use strict";n("a3fd")},e93a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative"}},[n("div",{ref:"pixi_area",staticClass:"canvas",on:{click:e.onClickCanvas}},[null!=e.tipsText?n("div",{staticClass:"tips"},[n("div",{staticClass:"message"},[e._v(e._s(e.tipsText))])]):e._e()]),null!=e.field&&e.isEditorMode?[n("b-button",{staticStyle:{margin:"4px"},on:{click:e.onClickToggleEditing}},[e._v(e._s(e.editing?"再生":"エディット"))]),n("b-button",{staticStyle:{margin:"4px"},on:{click:e.onClickLoad}},[e._v("読み込み")]),n("b-button",{staticStyle:{margin:"4px"},on:{click:e.onClickSave}},[e._v("保存")]),n("div",{staticStyle:{"margin-top":"8px","margin-bottom":"8px"}},e._l(e.editingInfo.stageInfos,(function(t,i){return n("span",{key:i,staticClass:"stage-select",class:{focused:i===e.editingInfo.selectedStageInfoIndex},on:{click:function(t){return e.onClickStage(i)}}},[e._v("ステージ"+e._s(i))])})),0),n("div",[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.field.maxLength,expression:"field.maxLength",modifiers:{number:!0}}],attrs:{id:"fieldLength",type:"number",step:"1"},domProps:{value:e.field.maxLength},on:{input:function(t){t.target.composing||e.$set(e.field,"maxLength",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("label",{attrs:{for:"fieldLength"}},[e._v("ステージの長さ")])]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.field.x,expression:"field.x",modifiers:{number:!0}}],staticStyle:{width:"400px"},attrs:{id:"fieldX",type:"range",value:"0",max:"0",min:-e.field.maxLength},domProps:{value:e.field.x},on:{input:e.onFieldXChanged,__r:function(t){e.$set(e.field,"x",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("label",{attrs:{for:"fieldX"}},[e._v(e._s(e.field.x))])]),n("div",[n("img",{staticClass:"icon-button",class:{focused:"r"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-r.png"},on:{click:function(t){return e.onColorSelected("r")}}}),n("img",{staticClass:"icon-button",class:{focused:"g"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-g.png"},on:{click:function(t){return e.onColorSelected("g")}}}),n("img",{staticClass:"icon-button",class:{focused:"b"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-b.png"},on:{click:function(t){return e.onColorSelected("b")}}}),n("img",{staticClass:"icon-button",class:{focused:"y"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-y.png"},on:{click:function(t){return e.onColorSelected("y")}}}),n("img",{staticClass:"icon-button",class:{focused:"lb"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-lb.png"},on:{click:function(t){return e.onColorSelected("lb")}}}),n("img",{staticClass:"icon-button",class:{focused:"p"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-p.png"},on:{click:function(t){return e.onColorSelected("p")}}}),n("img",{staticClass:"icon-button",class:{focused:"w"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-w.png"},on:{click:function(t){return e.onColorSelected("w")}}}),n("img",{staticClass:"icon-button",class:{focused:"bl"===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/bubble-bl.png"},on:{click:function(t){return e.onColorSelected("bl")}}}),n("img",{staticClass:"icon-button",class:{focused:null===e.editingInfo.selectedColor},attrs:{src:"/arpg-sample/images/game/01/trash.png"},on:{click:function(t){return e.onColorSelected(null)}}})])]:e._e()],2)},a=[],r=(n("4de4"),n("4160"),n("d81d"),n("18a5"),n("159b"),n("96cf"),n("262e")),s=n("2caf"),o=n("d4ec"),u=n("bee2"),c=n("2b0e"),l=n("22a2"),d=n("1219"),h=n("b74a"),p=2,g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();Object(o["a"])(this,e),this.oldNow=t,this.ms=0,this.counter=0,this.averageMs=0}return Object(u["a"])(e,[{key:"checkPoint",value:function(){var e=performance.now();this.ms+=e-this.oldNow,this.oldNow=e,++this.counter,this.counter>=60&&(this.averageMs=this.ms/this.counter,this.counter=0,this.ms=0)}}]),e}(),f=function e(t,n){Object(o["a"])(this,e),this.message=t,this.x=n},m=function(){function e(){Object(o["a"])(this,e),this.tipsList=[],this.tipsList.push(new f("Spaceキーか↑キーを押すと浮上、\n離すと潜水するよ。",0)),this.tipsList.push(new f("黒い泡に触れて酸素を補給しよう。",200)),this.tipsList.push(new f("連続して泡を集めるとコンボカウントが上がるよ。",400)),this.tipsList.push(new f("赤い泡は赤くなってから触れよう。\nZキーを押している間は赤くなるよ。",550)),this.tipsList.push(new f("Xキーを押すと緑色になれるよ。",875)),this.tipsList.push(new f("Cキーを押すと青くなれるよ。",1150)),this.tipsList.push(new f("ZキーとXキーを一緒に押すと黄色くなれるよ。",1400)),this.tipsList.push(new f("浮上しながら泡を集めよう。",1700)),this.tipsList.push(new f("潜水しながら泡を集めよう。",2050)),this.tipsList.push(new f("Z, X, Cを組み合わせて一緒に押すと色々な色になるよ。試してみよう。",2320)),this.tipsList.push(new f("チュートリアルはここまで。\n本編に乞うご期待。",3200))}return Object(u["a"])(e,[{key:"checkTips",value:function(e){return this.tipsList.length>0&&this.tipsList[0].x<=-e?this.tipsList.shift().message:null}}]),e}(),b=function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(e){var i;Object(o["a"])(this,n),i=t.call(this),i.field=e,i.score=0,i.numSprites=[];for(var a=0;a<5;++a){var r=l["Sprite"].from("/arpg-sample/images/game/01/num0-s.png");r.anchor.set(1,1),r.position.set(20*-a,0),i.numSprites.push(r),i.addChild(r)}return i.refreshNumber(),i}return Object(u["a"])(n,[{key:"update",value:function(){this.score!=this.field.score&&(this.score=this.field.score,this.refreshNumber())}},{key:"refreshNumber",value:function(){for(var e=0;e<5;++e){var t=Math.pow(10,e),n=Math.floor(this.score/t)%10,i=this.numSprites[e];i.visible=0===e||this.score>=t,i.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/num".concat(n,"-s.png")].texture}}}]),n}(l["Container"]),v=function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(e){var i;Object(o["a"])(this,n),i=t.call(this),i.field=e,i.comboCount=0,i.container=new l["Container"],i.container.position.set(0,-26),i.addChild(i.container);var a=l["Sprite"].from("/arpg-sample/images/game/01/combo.png");return a.anchor.set(.5,.5),a.position.set(0,0),i.addChild(a),i.num1=l["Sprite"].from("/arpg-sample/images/game/01/num0.png"),i.num1.anchor.set(.5,.5),i.num1.position.set(0,0),i.container.addChild(i.num1),i.num2=l["Sprite"].from("/arpg-sample/images/game/01/num0.png"),i.num2.anchor.set(.5,.5),i.num2.position.set(-24,0),i.num2.visible=!1,i.container.addChild(i.num2),i.num3=l["Sprite"].from("/arpg-sample/images/game/01/num0.png"),i.num3.anchor.set(.5,.5),i.num3.position.set(-48,0),i.num3.visible=!1,i.container.addChild(i.num3),i.visible=!1,i}return Object(u["a"])(n,[{key:"update",value:function(){this.comboCount!=this.field.comboCount&&(this.comboCount=this.field.comboCount,this.refreshNumber(),this.comboCount>=2&&(this.visible=!0))}},{key:"refreshNumber",value:function(){var e=Math.floor(this.comboCount/1)%10,t=Math.floor(this.comboCount/10)%10,n=Math.floor(this.comboCount/100)%10;this.num1.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/num".concat(e,".png")].texture,this.num2.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/num".concat(t,".png")].texture,this.num3.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/num".concat(n,".png")].texture,this.comboCount<10?(this.container.x=0,this.num1.visible=!0,this.num2.visible=!1,this.num3.visible=!1):this.comboCount<100?(this.container.x=12,this.num1.visible=!0,this.num2.visible=!0,this.num3.visible=!1):this.comboCount<1e3&&(this.container.x=24,this.num1.visible=!0,this.num2.visible=!0,this.num3.visible=!0)}}]),n}(l["Container"]),y=function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(e){var i;return Object(o["a"])(this,n),i=t.call(this),i.color=e,i.status="active",i.coroutine=null,i.anchor.set(.5,.5),i.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/bubble-".concat(e,".png")].texture,i}return Object(u["a"])(n,[{key:"break",value:function(e){this.status="deleting",this.coroutine=this.breakCoroutine(e)}},{key:"update",value:function(){null!=this.coroutine&&this.coroutine.next()}},{key:"breakCoroutine",value:regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<5)){e.next=10;break}return this.scale.x+=t?.1:-.1,this.scale.y+=t?.1:-.1,this.alpha-=.2,void(e.next=7);case 7:++n,e.next=1;break;case 10:this.status="deleted";case 11:case"end":return e.stop()}}),e,this)}))}]),n}(l["Sprite"]),x=35,w=205,k=50,C=90,S=88,E=67,L=38,I=32,O=-1.6,M=1.6,P=function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(e){var i;return Object(o["a"])(this,n),i=t.call(this,l["Loader"].shared.resources["/arpg-sample/images/game/01/sakana-bl.png"].texture),i.inputManger=e,i.color="bl",i.ySpeed=0,i.coroutine=null,i.position.x=k,i.anchor.set(.5,.5),i}return Object(u["a"])(n,[{key:"update",value:function(){null!=this.coroutine&&this.coroutine.next().done&&(this.coroutine=null),this.refreshColor();var e=this.checkJump();e||this.y!==x||(this.ySpeed=0),this.ySpeed+=.08,this.ySpeed=Math.min(M,Math.max(this.ySpeed,O)),this.position.y+=this.ySpeed,this.rotation=.1*this.ySpeed}},{key:"checkJump",value:function(){return!(!this.inputManger.isPressing(L)&&!this.inputManger.isPressing(I))&&(this.ySpeed=O,!0)}},{key:"refreshColor",value:function(){var e=this.color,t=this.colorFromInput();e!=t&&(this.color=t,this.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/sakana-".concat(this.color,".png")].texture)}},{key:"damaged",value:function(){this.coroutine=this.damageCoroutine()}},{key:"damageCoroutine",value:regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/sakana-".concat(this.color,"-d.png")].texture,t=0;case 2:if(!(t<3)){e.next=24;break}return void(e.next=5);case 5:return void(e.next=7);case 7:return void(e.next=9);case 9:return void(e.next=11);case 11:return this.visible=!1,void(e.next=14);case 14:return void(e.next=16);case 16:return void(e.next=18);case 18:return void(e.next=20);case 20:this.visible=!0;case 21:++t,e.next=2;break;case 24:this.texture=l["Loader"].shared.resources["/arpg-sample/images/game/01/sakana-".concat(this.color,".png")].texture;case 25:case"end":return e.stop()}}),e,this)}))},{key:"colorFromInput",value:function(){return this.inputManger.isPressing(C)?this.inputManger.isPressing(S)?this.inputManger.isPressing(E)?"w":"y":this.inputManger.isPressing(E)?"p":"r":this.inputManger.isPressing(S)?this.inputManger.isPressing(E)?"lb":"g":this.inputManger.isPressing(E)?"b":"bl"}}]),n}(l["Sprite"]),j=function e(){Object(o["a"])(this,e),this.length=6400,this.layout=[]},A=function e(){Object(o["a"])(this,e),this.selectedColor=null,this.selectedStageInfoIndex=0,this.stageInfos=[new j,new j,new j,new j,new j]},_=function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(e){var i;return Object(o["a"])(this,n),i=t.call(this),i.maxLength=6400,i.speed=-.9,i.oldX=0,i.bubblePlaces=[],i.bubbles=[],i.walls=[],i.score=0,i.comboCount=0,i.sortableChildren=!0,i.sakana=new P(e),i.sakana.y=120,i.sakana.zIndex=1,i.addChild(i.sakana),i.createWallByX(0),i.createWallByX(128),i.createWallByX(256),i}return Object(u["a"])(n,[{key:"update",value:function(){this.oldX=this.x,this.x+=this.speed,this.sakana.x-=this.speed,this.sakana.update(),this.sakana.y=Math.max(x,Math.min(w,this.sakana.y)),this.bubbles.forEach((function(e){return e.update()})),this.hitCheck(),this.createBubble(),this.updateWall(),this.bubbles=this.bubbles.filter((function(e){return"deleted"!=e.status||(e.parent.removeChild(e),!1)}))}},{key:"isEnded",value:function(){return-this.x>=this.maxLength}},{key:"createBubble",value:function(){var e=this,t=this.bubblePlaces.filter((function(t){return t[0].x>=320-e.oldX+32&&t[0].x<320-e.x+32}));t.forEach((function(t){var n=new y(t[1]);n.position=t[0],e.addChild(n),e.bubbles.push(n)}))}},{key:"createWallByX",value:function(e){var t=l["Sprite"].from("/arpg-sample/images/game/01/wave.png");t.x=e;var n=l["Sprite"].from("/arpg-sample/images/game/01/ground.png");n.anchor.set(0,1),n.y=240,n.x=e,this.addChild(t),this.addChild(n),this.walls.push(t),this.walls.push(n)}},{key:"updateWall",value:function(){var e=this;if(Math.floor(this.oldX/128)!=Math.floor(this.x/128)){this.createWallByX(128*-Math.floor(this.oldX/128)+320);var t=l["Sprite"].from("/arpg-sample/images/game/01/wave.png");t.x=128*-Math.floor(this.oldX/128)+320;var n=l["Sprite"].from("/arpg-sample/images/game/01/ground.png");n.anchor.set(0,1),n.y=240,n.x=128*-Math.floor(this.oldX/128)+320,this.addChild(t),this.addChild(n),this.walls.push(t),this.walls.push(n),this.walls=this.walls.filter((function(t){return!(t.x<-e.x-128)||(t.parent.removeChild(t),!1)}))}}},{key:"addBubble",value:function(e,t){this.bubblePlaces.push([t,e]),this.reload()}},{key:"removeBubble",value:function(e){this.bubblePlaces=this.bubblePlaces.filter((function(t){var n=Math.sqrt(Math.pow(t[0].x-e.x,2)+Math.pow(t[0].y-e.y,2));return n>12})),this.reload()}},{key:"hitCheck",value:function(){var e=this;this.bubbles.filter((function(e){return"active"==e.status})).forEach((function(t){var n=Math.sqrt(Math.pow(t.x-e.sakana.x,2)+Math.pow(t.y-e.sakana.y,2));n<28&&(e.sakana.color==t.color?(t["break"](!1),e.score+=100*e.calcComboRate(),++e.comboCount):(e.sakana.damaged(),t["break"](!0),e.comboCount=0))}))}},{key:"calcComboRate",value:function(){return Math.min(2,1+.1*this.comboCount)}},{key:"reload",value:function(){var e=this;this.sakana.x=-this.x+k,this.bubbles.forEach((function(e){e.parent.removeChild(e)})),this.bubbles=[],this.bubblePlaces.forEach((function(t){var n=t[0];if(n.x>=-e.x&&n.x<=320-e.x){var i=new y(t[1]);i.position=n,e.addChild(i),e.bubbles.push(i)}}))}},{key:"import",value:function(e){this.maxLength=e.length,this.bubblePlaces=e.layout.map((function(e){return[new l["Point"](e[0],e[1]),e[2]]})),this.x=0,this.reload()}},{key:"export",value:function(){var e=new j;return e.length=this.maxLength,e.layout=this.bubblePlaces.map((function(e){return[e[0].x,e[0].y,e[1]]})),e}}]),n}(l["Container"]),T=c["default"].extend({data:function(){return{pixiApp:null,inputManager:new d["a"],fpsCounter:new g,field:null,editingInfo:new A,editing:!0,scoreArea:null,comboArea:null,tipsManager:new m,tipsText:null,tipsTextDelay:0}},mounted:function(){var e=this;l["settings"].RESOLUTION=window.devicePixelRatio,l["settings"].SCALE_MODE=l["SCALE_MODES"].NEAREST,this.isEditorMode||(this.editing=!1),window.onkeydown=this.onKeyDown,window.onkeyup=this.onKeyUp;var t={width:640,height:480};this.pixiApp=new l["Application"](t),this.pixiApp.ticker.maxFPS=60,this.pixiApp.ticker.minFPS=60;var n=this.$refs["pixi_area"];n.appendChild(this.pixiApp.view);var i=new l["Sprite"](l["Texture"].WHITE);i.width=320,i.height=240,i.tint=3114440,this.pixiApp.stage.addChild(i),this.pixiApp.stage.scale.x=p,this.pixiApp.stage.scale.y=p,l["utils"].clearTextureCache(),l["Loader"].shared.reset().add("/arpg-sample/images/game/01/sakana-r.png").add("/arpg-sample/images/game/01/sakana-g.png").add("/arpg-sample/images/game/01/sakana-b.png").add("/arpg-sample/images/game/01/sakana-y.png").add("/arpg-sample/images/game/01/sakana-lb.png").add("/arpg-sample/images/game/01/sakana-p.png").add("/arpg-sample/images/game/01/sakana-w.png").add("/arpg-sample/images/game/01/sakana-bl.png").add("/arpg-sample/images/game/01/sakana-r-d.png").add("/arpg-sample/images/game/01/sakana-g-d.png").add("/arpg-sample/images/game/01/sakana-b-d.png").add("/arpg-sample/images/game/01/sakana-y-d.png").add("/arpg-sample/images/game/01/sakana-lb-d.png").add("/arpg-sample/images/game/01/sakana-p-d.png").add("/arpg-sample/images/game/01/sakana-w-d.png").add("/arpg-sample/images/game/01/sakana-bl-d.png").add("/arpg-sample/images/game/01/bubble-r.png").add("/arpg-sample/images/game/01/bubble-g.png").add("/arpg-sample/images/game/01/bubble-b.png").add("/arpg-sample/images/game/01/bubble-y.png").add("/arpg-sample/images/game/01/bubble-lb.png").add("/arpg-sample/images/game/01/bubble-p.png").add("/arpg-sample/images/game/01/bubble-w.png").add("/arpg-sample/images/game/01/bubble-bl.png").add("/arpg-sample/images/game/01/combo.png").add("/arpg-sample/images/game/01/num1.png").add("/arpg-sample/images/game/01/num2.png").add("/arpg-sample/images/game/01/num3.png").add("/arpg-sample/images/game/01/num4.png").add("/arpg-sample/images/game/01/num5.png").add("/arpg-sample/images/game/01/num6.png").add("/arpg-sample/images/game/01/num7.png").add("/arpg-sample/images/game/01/num8.png").add("/arpg-sample/images/game/01/num9.png").add("/arpg-sample/images/game/01/num0.png").add("/arpg-sample/images/game/01/num1-s.png").add("/arpg-sample/images/game/01/num2-s.png").add("/arpg-sample/images/game/01/num3-s.png").add("/arpg-sample/images/game/01/num4-s.png").add("/arpg-sample/images/game/01/num5-s.png").add("/arpg-sample/images/game/01/num6-s.png").add("/arpg-sample/images/game/01/num7-s.png").add("/arpg-sample/images/game/01/num8-s.png").add("/arpg-sample/images/game/01/num9-s.png").add("/arpg-sample/images/game/01/num0-s.png").add("/arpg-sample/images/game/01/wave.png").add("/arpg-sample/images/game/01/ground.png").load((function(){e.field=new _(e.inputManager),e.pixiApp.stage.addChild(e.field),e.scoreArea=new b(e.field),e.scoreArea.position.set(316,240),e.pixiApp.stage.addChild(e.scoreArea),e.comboArea=new v(e.field),e.comboArea.position.set(260,48),e.pixiApp.stage.addChild(e.comboArea),e.isEditorMode?e.onClickLoad():e.field["import"](h),e.pixiApp.ticker.add(e.update)}))},methods:{onKeyDown:function(e){null==this.tipsText&&this.inputManager.onKeyDown(e.keyCode)},onKeyUp:function(e){null!=this.tipsText&&this.tipsTextDelay<=0?this.tipsText=null:this.inputManager.onKeyUp(e.keyCode)},update:function(e){if(this.editing||null!=this.tipsText)this.tipsTextDelay=Math.max(0,this.tipsTextDelay-1);else if(!this.field.isEnded()){this.fpsCounter.checkPoint(),this.field.update(),this.scoreArea.update(),this.comboArea.update(),this.inputManager.endTurn();var t=this.tipsManager.checkTips(this.field.x);null!=t&&(this.tipsText=t,this.tipsTextDelay=30,this.inputManager.reset())}},onColorSelected:function(e){this.editingInfo.selectedColor=e},onClickCanvas:function(e){if(this.isEditorMode){var t=new l["Point"](e.clientX/p-this.field.position.x,e.clientY/p);null!=this.editingInfo.selectedColor?this.field.addBubble(this.editingInfo.selectedColor,t):this.field.removeBubble(t)}},onClickToggleEditing:function(){this.editing=!this.editing},onFieldXChanged:function(){this.field.reload()},onClickStage:function(e){this.editingInfo.selectedStageInfoIndex=e},onClickLoad:function(){var e=localStorage.getItem("game/01/stageInfos");null!=e&&(this.editingInfo.stageInfos=JSON.parse(e),this.field["import"](this.editingInfo.stageInfos[this.editingInfo.selectedStageInfoIndex]))},onClickSave:function(){this.editingInfo.stageInfos[this.editingInfo.selectedStageInfoIndex]=this.field["export"](),localStorage.setItem("game/01/stageInfos",JSON.stringify(this.editingInfo.stageInfos))},closeTips:function(){this.tipsText=null}},beforeDestroy:function(){this.pixiApp.destroy(!0)},components:{},computed:{isEditorMode:function(){return"1"==this.$route.query.editorMode}},props:[]}),N=T,K=(n("e177f"),n("2877")),R=Object(K["a"])(N,i,a,!1,null,"6646657a",null);t["default"]=R.exports},f183:function(e,t,n){var i=n("d012"),a=n("861d"),r=n("5135"),s=n("9bf2").f,o=n("90e3"),u=n("bb2f"),c=o("meta"),l=0,d=Object.isExtensible||function(){return!0},h=function(e){s(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,c)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},g=function(e,t){if(!r(e,c)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},f=function(e){return u&&m.REQUIRED&&d(e)&&!r(e,c)&&h(e),e},m=e.exports={REQUIRED:!1,fastKey:p,getWeakData:g,onFreeze:f};i[c]=!0}}]);
//# sourceMappingURL=chunk-4ac5b682.b663f403.js.map