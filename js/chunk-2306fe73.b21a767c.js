(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2306fe73"],{"45fc":function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").some,h=r("a640"),s=r("ae40"),n=h("some"),o=s("some");a({target:"Array",proto:!0,forced:!n||!o},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4b5d":function(t,e,r){},"4de4":function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").filter,h=r("1dde"),s=r("ae40"),n=h("filter"),o=s("filter");a({target:"Array",proto:!0,forced:!n||!o},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4ec9":function(t,e,r){"use strict";var a=r("6d61"),i=r("6566");t.exports=a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"4ff9":function(t,e,r){},5033:function(t,e,r){"use strict";r("4ff9")},"6fee":function(t,e,r){"use strict";r("4b5d")},"846a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"root"},[r("div",{staticClass:"left-pane"},[r("div",{staticClass:"add-button-area"},[r("b-button",{staticStyle:{margin:"4px"},on:{click:function(e){return t.generateCharacter(0)}}},[r("img",{attrs:{src:"/arpg-sample/images/stages/013/chara1-icon.png"}})]),r("b-button",{staticStyle:{margin:"4px"},on:{click:function(e){return t.generateCharacter(1)}}},[r("img",{attrs:{src:"/arpg-sample/images/stages/013/chara2-icon.png"}})])],1),r("div",{staticClass:"character-area"},t._l(t.characters,(function(e,a){return r("div",{key:a},[r("CharacterCell",{attrs:{character:e,focused:t.isFocusedCharacter(e)},on:{click:function(r){return t.onClickCharacterCell(e)},delete:function(r){return t.onClickDeleteCharacter(e)}}})],1)})),0)]),r("div",{staticStyle:{position:"relative"}},[r("div",{ref:"pixi_area",staticStyle:{width:"640px",height:"480px"}}),r("div",{staticStyle:{position:"absolute",left:"4px",top:"4px",color:"#fff"}},[t._v(t._s((1e3/t.fpsCounter.averageMs).toFixed(2))+" fps")])])])},i=[],h=(r("4de4"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("3835")),s=r("d4ec"),n=r("bee2"),o=r("2b0e"),c=r("22a2"),d=(r("18a5"),r("262e")),l=r("2caf"),u=r("426a"),p=function t(e,r,a){Object(s["a"])(this,t),this.moveX=e,this.moveY=r,this.nextDirection=a},g=function(){function t(e,r,a){Object(s["a"])(this,t),this.textureOffset=r,this.routine=a,this.x=0,this.y=0,this.hitCircle=new c["Circle"](0,0,12),this.hitRect=new c["Rectangle"](-12,-12,24,24),this.animationFrame=0,this._currentDirection=2,this.preUpdateInfo=null,this.animationStep=0,this.bodySprite=new u["a"],this.bodySprite.texture=new c["Texture"](e.baseTexture,new c["Rectangle"](r.x,r.y,32,64)),a.character=this,this.bodySprite.anchor.set(.5,1);var i=new c["Texture"](e.baseTexture,new c["Rectangle"](224,0,32,32));this.shadowSprite=new u["a"],this.shadowSprite.texture=i,this.shadowSprite.alpha=.5,this.shadowSprite.anchor.set(.5,.5),this.debugCircle=new c["Graphics"],this.debugCircle.lineStyle(2,16733525,1),this.debugCircle.alpha=.7,this.debugCircle.drawCircle(0,0,11),this.debugRect=new c["Graphics"],this.debugRect.lineStyle(2,5592575,1),this.debugRect.alpha=.7,this.debugRect.drawRect(this.hitRect.x,this.hitRect.y,this.hitRect.width,this.hitRect.height)}return Object(n["a"])(t,[{key:"currentDirection",get:function(){return this._currentDirection},set:function(t){this._currentDirection=t,this.syncTexture()}},{key:"syncTexture",value:function(){var t=0,e=0;switch(this.currentDirection){case 1:t=96;break;case 2:break;case 3:t=96,e=64;break;case 4:e=64;break;case 6:e=128;break;case 7:t=96,e=128;break;case 8:e=192;break;case 9:t=96,e=192;break}t+=32*(3===this.animationStep?1:this.animationStep);var r=new c["Rectangle"](this.textureOffset.x+t,this.textureOffset.y+e,32,64);this.bodySprite.texture.frame=r}},{key:"preUpdate",value:function(){this.routine.preUpdate()}},{key:"update",value:function(){var t=[this.x,this.y+8];this.bodySprite.x=t[0],this.bodySprite.y=t[1];var e=[this.x,this.y];this.shadowSprite.x=e[0],this.shadowSprite.y=e[1];var r=[this.x,this.y];this.hitCircle.x=r[0],this.hitCircle.y=r[1];var a=[this.x,this.y];this.debugCircle.x=a[0],this.debugCircle.y=a[1];var i=[this.x-12,this.y-12];this.hitRect.x=i[0],this.hitRect.y=i[1];var h=[this.x,this.y];this.debugRect.x=h[0],this.debugRect.y=h[1],this.bodySprite.zOrder=this.shadowSprite.zOrder=this.bodySprite.position.y,++this.animationFrame,this.animationFrame>30&&(this.animationFrame=0,this.animationStep=(this.animationStep+1)%4,this.syncTexture())}}]),t}(),f=function t(){Object(s["a"])(this,t)},C=function(t,e){var r=.7*e;switch(t){case 1:return[-r,r];case 2:return[0,e];case 3:return[r,r];case 4:return[-e,0];case 6:return[e,0];case 7:return[-r,-r];case 8:return[0,-e];case 9:return[r,-r]}return[0,0]},y=function(t){Object(d["a"])(r,t);var e=Object(l["a"])(r);function r(){var t,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;return Object(s["a"])(this,r),t=e.call(this),t.isMoving=a,t.frameCountToWait=i,t.frameCountToMove=h,t}return Object(n["a"])(r,[{key:"preUpdate",value:function(){if(this.isMoving){var t=C(this.character.currentDirection,1),e=Object(h["a"])(t,2),r=e[0],a=e[1];this.character.preUpdateInfo=new p(r,a,this.character.currentDirection),--this.frameCountToWait,this.frameCountToWait<=0&&(this.frameCountToWait=0,this.frameCountToMove=60+30*Math.floor(3*Math.random()),this.isMoving=!1)}else if(--this.frameCountToMove,this.frameCountToMove<=0){this.frameCountToMove=0,this.frameCountToWait=60;var i=[1,2,3,4,6,7,8,9][Math.floor(8*Math.random())];this.character.preUpdateInfo=new p(0,0,i),this.isMoving=!0}}}]),r}(f),m=(r("99af"),r("4160"),r("45fc"),r("0d03"),r("4ec9"),r("25f0"),r("159b"),r("d820")),v=r("5e0f"),S=3,b=640,x=480,A=b/3,w=x/3,M=function t(e,r,a,i,h){Object(s["a"])(this,t),this.type=e,this.left=r,this.top=a,this.right=i,this.bottom=h},D=function t(e,r,a){Object(s["a"])(this,t),this.character=e,this.areaGridX=r,this.areaGridY=a,this.isAdded=!1},k=function(t){Object(d["a"])(r,t);var e=Object(l["a"])(r);function r(t,a,i){var h;Object(s["a"])(this,r),h=e.call(this),h.texture=t,h.mapChipData=a,h.mapData=i,h.horizontalGridNum=200,h.verticalGridNum=200,h.targetCharacter=null,h.fieldCharacters=[],h.inSightArea=new c["Rectangle"],h.targetArrow=null,h.walls=[],h.collisions=[],h.collisionsByArea=new Map,h.fieldCharactersByArea=new Map,h.textureMap=new Map,h.textureList=[],h.frameCount=0,v["b"].use32bitIndex=!0,h.sortableChildren=!0,h.bgLayerContainer=new v["a"](0,[t]),h.layerContainer=new m["a"](2e4,{uvs:!0,vertices:!0,tint:!0}),h.airLayerContainer=new v["a"](0,[t]),h.debugLayerContainer=new c["Container"],h.debugLayerContainer.visible=!1,h.addChild(h.bgLayerContainer),h.addChild(h.layerContainer),h.addChild(h.airLayerContainer),h.addChild(h.debugLayerContainer);var n=h.texture.clone();return n.frame=new c["Rectangle"](224,32,16,16),h.targetArrow=new c["Sprite"](n),h.targetArrow.anchor.set(.5,.5),h.targetArrow.alpha=0,h.layerContainer.addChild(h.targetArrow),h.generateMap(),h.inSightArea.width=Math.ceil(b/(S*h.mapData.tilewidth))+4,h.inSightArea.height=Math.ceil(x/(S*h.mapData.tileheight))+4,h.updateInSightArea(),h.on("added",(function(){})),h}return Object(n["a"])(r,[{key:"reloadMap",value:function(t){this.mapData=t,this.clearMap(),this.generateMap()}},{key:"clearMap",value:function(){this.textureMap.forEach((function(t){return t.destroy()})),this.textureMap.clear(),this.bgLayerContainer.clear(),this.airLayerContainer.clear(),this.walls.length=0}},{key:"generateMap",value:function(){this.textureList.forEach((function(t){return t.destroy()})),this.textureList.length=0;for(var t=0,e=Math.floor(this.mapChipData.imageheight/this.mapChipData.tileheight);t<e;++t)for(var r=0,a=Math.floor(this.mapChipData.imagewidth/this.mapChipData.tilewidth);r<a;++r){var i=this.texture.clone();i.frame=new c["Rectangle"](this.mapChipData.tilewidth*r,this.mapChipData.tileheight*t,this.mapChipData.tilewidth,this.mapChipData.tileheight),this.textureList.push(i)}this.horizontalGridNum=this.mapData.width,this.verticalGridNum=this.mapData.height;for(var h=0;h<this.verticalGridNum;++h)for(var s=0;s<this.horizontalGridNum;++s){for(var n=s+h*this.horizontalGridNum,o=0;o<3;++o){var d=this.mapData.layers[o].data[n];d>0&&this.bgLayerContainer.addFrame(this.textureList[d-1],s*this.mapChipData.tilewidth,h*this.mapChipData.tileheight)}var l=this.mapData.layers[3].data[n];l>0&&this.airLayerContainer.addFrame(this.textureList[l-1],s*this.mapChipData.tilewidth,h*this.mapChipData.tileheight);var u=this.mapData.tilesets.filter((function(t){return"collosion.json"===t.source}))[0].firstgid,p=this.mapData.layers[4].data[n];p>0&&(this.collisions[h*this.horizontalGridNum+s]=new M(p-u,s*this.mapData.tilewidth,h*this.mapData.tileheight,s*this.mapData.tilewidth+this.mapData.tilewidth,h*this.mapData.tileheight+this.mapData.tileheight))}for(var g=0;g<this.verticalGridNum;++g)for(var f=0;f<this.horizontalGridNum;++f){var C=this.collisions[g*this.horizontalGridNum+f];if(null!=C){var y=this.gridToAreaGrid(f,g).toString();this.collisionsByArea.has(y)?this.collisionsByArea.get(y).push(C):this.collisionsByArea.set(y,[C])}}}},{key:"setTargetCharacter",value:function(t){this.targetCharacter=t,this.targetArrow.alpha=1}},{key:"addCharacter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.positionToAreaGrid(t.x,t.y),a=Object(h["a"])(r,2),i=a[0],s=a[1],n=new D(t,i,s);this.fieldCharacters.push(n),this.addFieldCharacterToArea(n,i,s),e&&this.setTargetCharacter(t),t.update(),this.debugLayerContainer.addChild(t.debugCircle),this.debugLayerContainer.addChild(t.debugRect),this.isInSight(n)&&(this.layerContainer.addChild(n.character.shadowSprite),this.layerContainer.addChild(n.character.bodySprite),n.isAdded=!0)}},{key:"removeCharacter",value:function(t){var e=this;this.targetCharacter===t&&(this.targetCharacter=null,this.targetArrow.alpha=0),this.debugLayerContainer.removeChild(t.debugCircle),this.debugLayerContainer.removeChild(t.debugRect),this.layerContainer.removeChild(t.shadowSprite),this.layerContainer.removeChild(t.bodySprite),this.fieldCharacters=this.fieldCharacters.filter((function(r){return r.character!==t||(e.removeFieldCharacterFromArea(r,r.areaGridX,r.areaGridY),!1)}))}},{key:"update",value:function(){var t=this,e=this.getInSightFieldCharacters();e.forEach((function(t){return t.character.preUpdate()})),e.forEach((function(e){if(null!=e.character.preUpdateInfo){var r=[e.character.preUpdateInfo.moveX,e.character.preUpdateInfo.moveY],a=r[0],i=r[1];if(0!=a||0!=i){var s=t.hitOtherCaracter(e,a,i),n=Object(h["a"])(s,2),o=n[0],c=n[1];o&&(a-=a*c,i-=i*c);var d=t.hitWall(e.character,a,i),l=Object(h["a"])(d,3),u=l[0],p=l[1],g=l[2];u?0===p||0===g?(e.character.x+=a-p,e.character.y+=i-g):t.hitWall(e.character,0,i)[0]?t.hitWall(e.character,a,0)[0]||(e.character.x+=a,e.character.y+=i-g):(e.character.y+=i,e.character.x+=a-p):(e.character.x+=a,e.character.y+=i)}e.character.currentDirection=e.character.preUpdateInfo.nextDirection,e.character.preUpdateInfo=null;var f=[e.areaGridX,e.areaGridY],C=f[0],y=f[1];e.character.update();var m=t.positionToAreaGrid(e.character.x,e.character.y),v=Object(h["a"])(m,2);e.areaGridX=v[0],e.areaGridY=v[1],e.areaGridX===C&&e.areaGridY===y||(t.removeFieldCharacterFromArea(e,C,y),t.addFieldCharacterToArea(e,e.areaGridX,e.areaGridY),t.isInSight(e)||(t.layerContainer.removeChild(e.character.shadowSprite),t.layerContainer.removeChild(e.character.bodySprite),e.isAdded=!1))}else e.character.update()}));var r=b-A,a=A,i=x-w,s=w;if(this.targetCharacter){this.targetArrow.position.set(this.targetCharacter.x,this.targetCharacter.y-64);var n=this.targetCharacter.x+this.x;n>r?this.x=-(this.targetCharacter.x-r):n<a&&(this.x=-(this.targetCharacter.x-a));var o=this.targetCharacter.y+this.y;o>i?this.y=-(this.targetCharacter.y-i):o<s&&(this.y=-(this.targetCharacter.y-s));var c=[this.inSightArea.x,this.inSightArea.y],d=c[0],l=c[1];this.updateInSightArea();var u=this.inSightArea.x-d,p=this.inSightArea.y-l;this.updateCharacterVisibilityByMovedAreaOffset(u,p)}this.x=Math.floor(Math.min(0,Math.max(-(this.mapData.tilewidth*this.horizontalGridNum-b),this.x))),this.y=Math.floor(Math.min(0,Math.max(-(this.mapData.tileheight*this.verticalGridNum-x),this.y))),this.layerContainer.sortChildren(),++this.frameCount}},{key:"hitOtherCaracter",value:function(t,e,r){var a=t.character.hitCircle.clone();a.x+=e,a.y+=r;var i=0,h=this.getOtherFieldCharactersByAreaGrid(t),s=h.some((function(t){var e=[a.x,a.y,t.character.hitCircle.x,t.character.hitCircle.y],r=e[0],h=e[1],s=e[2],n=e[3];i=a.radius+t.character.hitCircle.radius-Math.sqrt(Math.pow(s-r,2)+Math.pow(n-h,2));var o=i>=0;return o}));return[s,s?i/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)):0]}},{key:"hitWall",value:function(t,e,r){var a=this.positionToAreaGrid(t.x,t.y),i=this.getCollisionsByAreaGrid(a),h=t.hitRect.clone();h.x+=e,h.y+=r;var s=0,n=0,o=i.some((function(t){var a=h.left<t.right&&h.right>t.left,i=h.top<t.bottom&&h.bottom>t.top,o=a&&i;return o&&(e<0?s=h.left-t.right:e>0&&(s=h.right-t.left),r<0?n=h.top-t.bottom:r>0&&(n=h.bottom-t.top)),o}));return[o,s,n]}},{key:"getOtherFieldCharactersByAreaGrid",value:function(t){var e=this,r=[],a=[t.areaGridX,t.areaGridY],i=[a.toString(),[a[0]-1,a[1]].toString(),[a[0]-1,a[1]-1].toString(),[a[0],a[1]-1].toString(),[a[0]+1,a[1]-1].toString(),[a[0]+1,a[1]].toString(),[a[0]+1,a[1]+1].toString(),[a[0],a[1]+1].toString(),[a[0]-1,a[1]+1].toString()];return i.forEach((function(t){e.fieldCharactersByArea.has(t)&&Array.prototype.push.apply(r,e.fieldCharactersByArea.get(t))})),r.filter((function(e){return e!==t}))}},{key:"getCollisionsByAreaGrid",value:function(t){var e=this,r=[],a=[t.toString(),[t[0]-1,t[1]].toString(),[t[0]-1,t[1]-1].toString(),[t[0],t[1]-1].toString(),[t[0]+1,t[1]-1].toString(),[t[0]+1,t[1]].toString(),[t[0]+1,t[1]+1].toString(),[t[0],t[1]+1].toString(),[t[0]-1,t[1]+1].toString()];return a.forEach((function(t){e.collisionsByArea.has(t)&&Array.prototype.push.apply(r,e.collisionsByArea.get(t))})),r}},{key:"addFieldCharacterToArea",value:function(t,e,r){var a=[e,r].toString();this.fieldCharactersByArea.has(a)?this.fieldCharactersByArea.get(a).push(t):this.fieldCharactersByArea.set(a,[t])}},{key:"removeFieldCharacterFromArea",value:function(t,e,r){var a=[e,r].toString(),i=this.fieldCharactersByArea.get(a);this.fieldCharactersByArea.set(a,i.filter((function(e){return e!==t})))}},{key:"gridToAreaGrid",value:function(t,e){return[Math.floor(t/S),Math.floor(e/S)]}},{key:"positionToAreaGrid",value:function(t,e){return[Math.floor(t/(S*this.mapData.tilewidth)),Math.floor(e/(S*this.mapData.tileheight))]}},{key:"setDebugMode",value:function(t){this.debugLayerContainer.visible=t}},{key:"getInSightFieldCharacters",value:function(){for(var t=[],e=this.inSightArea.top;e<=this.inSightArea.bottom;++e)for(var r=this.inSightArea.left;r<=this.inSightArea.right;++r){var a=[r,e].toString();this.fieldCharactersByArea.has(a)&&Array.prototype.push.apply(t,this.fieldCharactersByArea.get(a))}return t}},{key:"updateInSightArea",value:function(){this.inSightArea.x=Math.max(0,-Math.floor(this.x/(S*this.mapData.tilewidth))-2),this.inSightArea.y=Math.max(0,-Math.floor(this.y/(S*this.mapData.tileheight))-2)}},{key:"isInSight",value:function(t){return t.areaGridX>=this.inSightArea.left&&t.areaGridX<=this.inSightArea.right&&t.areaGridY>=this.inSightArea.top&&t.areaGridY<=this.inSightArea.bottom}},{key:"updateCharacterVisibilityByMovedAreaOffset",value:function(t,e){var r=this;if(0!==t){for(var a=t>0?this.inSightArea.right-t+1:this.inSightArea.left,i=t>0?this.inSightArea.right:this.inSightArea.left-t-1,h=a;h<=i;++h)for(var s=this.inSightArea.top;s<=this.inSightArea.bottom;++s){var n=[h,s].toString();this.fieldCharactersByArea.has(n)&&this.fieldCharactersByArea.get(n).forEach((function(t){t.isAdded||(r.layerContainer.addChild(t.character.shadowSprite),r.layerContainer.addChild(t.character.bodySprite),t.isAdded=!0)}))}console.log("movedAreaX = ".concat(t));var o=t>0?this.inSightArea.left-t:this.inSightArea.right+1,c=t>0?this.inSightArea.left-1:this.inSightArea.right-t;console.log("startX: ".concat(o,", endX: ").concat(c));for(var d=o;d<=c;++d)for(var l=this.inSightArea.top;l<=this.inSightArea.bottom;++l){var u=[d,l].toString();console.log(u),this.fieldCharactersByArea.has(u)&&this.fieldCharactersByArea.get(u).forEach((function(t){t.isAdded&&(r.layerContainer.removeChild(t.character.shadowSprite),r.layerContainer.removeChild(t.character.bodySprite),t.isAdded=!1)}))}}if(0!==e){for(var p=e>0?this.inSightArea.bottom-e+1:this.inSightArea.top,g=e>0?this.inSightArea.bottom:this.inSightArea.top-e-1,f=p;f<=g;++f)for(var C=this.inSightArea.left;C<=this.inSightArea.right;++C){var y=[C,f].toString();this.fieldCharactersByArea.has(y)&&this.fieldCharactersByArea.get(y).forEach((function(t){t.isAdded||(r.layerContainer.addChild(t.character.shadowSprite),r.layerContainer.addChild(t.character.bodySprite),t.isAdded=!0)}))}for(var m=e>0?this.inSightArea.top-e:this.inSightArea.bottom+1,v=e>0?this.inSightArea.top-1:this.inSightArea.bottom-e,S=m;S<=v;++S)for(var b=this.inSightArea.left;b<=this.inSightArea.right;++b){var x=[b,S].toString();this.fieldCharactersByArea.has(x)&&this.fieldCharactersByArea.get(x).forEach((function(t){t.isAdded&&(r.layerContainer.removeChild(t.character.shadowSprite),r.layerContainer.removeChild(t.character.bodySprite),t.isAdded=!1)}))}}}}]),r}(c["Container"]),T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"root",class:{focused:t.focused},on:{click:function(e){return t.$emit("click")}}},[r("img",{staticStyle:{"margin-left":"6px","margin-top":"6px",width:"32px",height:"32px"},attrs:{src:"/arpg-sample/images/stages/013/chara"+(t.character.type+1)+"-icon.png"}}),r("div",{staticClass:"position"},[t._v(" x: "+t._s(t.character.x.toFixed(0))),r("br"),t._v(" y: "+t._s(t.character.y.toFixed(0))+" ")]),r("b-button",{staticStyle:{"margin-right":"4px","margin-top":"8px",height:"32px"},on:{click:function(e){return e.stopPropagation(),t.$emit("delete")}}},[t._v("削除")])],1)},G=[],O=o["default"].extend({props:["character","focused"],methods:{onShow:function(){this.character.bodySprite.alpha=1},onHide:function(){this.character.bodySprite.alpha=0}}}),L=O,B=(r("5033"),r("2877")),j=Object(B["a"])(L,T,G,!1,null,"0aaf4441",null),R=j.exports,F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();Object(s["a"])(this,t),this.oldNow=e,this.ms=0,this.counter=0,this.averageMs=0}return Object(n["a"])(t,[{key:"checkPoint",value:function(){var t=performance.now();this.ms+=t-this.oldNow,this.oldNow=t,++this.counter,this.counter>=60&&(this.averageMs=this.ms/this.counter,this.counter=0,this.ms=0)}}]),t}(),E=o["default"].extend({data:function(){return{pixiApp:null,renderTexture:null,field:null,pressedKeyCodeSet:new Set,fpsCounter:new F,characters:[],isDebugMode:!1}},mounted:function(){var t=this;c["settings"].RESOLUTION=window.devicePixelRatio,c["settings"].SCALE_MODE=c["SCALE_MODES"].NEAREST,window.onkeydown=this.onKeyDown,window.onkeyup=this.onKeyUp;var e={width:640,height:480,autoDensity:!0};this.pixiApp=new c["Application"](e),this.pixiApp.ticker.maxFPS=60,this.pixiApp.ticker.minFPS=60;var r=this.$refs["pixi_area"];r.appendChild(this.pixiApp.view);var a=new c["Sprite"](c["Texture"].WHITE);a.width=320,a.height=240,a.tint=13421772,this.pixiApp.stage.addChild(a),c["utils"].clearTextureCache(),c["Loader"].shared.reset().add("/arpg-sample/images/stages/009/chara01.png").add("/arpg-sample/images/stages/009/chara02.png").add("/arpg-sample/images/stages/013/mapchip.png").add("/arpg-sample/images/stages/013/mapchip.json").add("/arpg-sample/images/stages/013/map01.json").load((function(){t.renderTexture=c["RenderTexture"].create({width:1024,height:1024});c["Sprite"].from(t.renderTexture);var e=c["Sprite"].from(c["Loader"].shared.resources["/arpg-sample/images/stages/013/mapchip.png"].texture);t.pixiApp.renderer.render(e,t.renderTexture,!1);var r=c["Sprite"].from(c["Loader"].shared.resources["/arpg-sample/images/stages/009/chara01.png"].texture);r.position.set(256,0),t.pixiApp.renderer.render(r,t.renderTexture,!1);var a=c["Sprite"].from(c["Loader"].shared.resources["/arpg-sample/images/stages/009/chara02.png"].texture);a.position.set(448,0),t.pixiApp.renderer.render(a,t.renderTexture,!1),t.field=new k(t.renderTexture,c["Loader"].shared.resources["/arpg-sample/images/stages/013/mapchip.json"].data,c["Loader"].shared.resources["/arpg-sample/images/stages/013/map01.json"].data),t.pixiApp.stage.addChild(t.field);for(var i=0;i<4;++i)t.generateCharacter(i%2);t.field.setTargetCharacter(t.characters[0])})),this.pixiApp.ticker.add(this.update)},methods:{onKeyDown:function(t){this.pressedKeyCodeSet.add(t.keyCode)},onKeyUp:function(t){this.pressedKeyCodeSet["delete"](t.keyCode)},update:function(t){this.fpsCounter.checkPoint(),null!=this.field&&this.field.update()},onClickToggleDebugMode:function(){this.isDebugMode=!this.isDebugMode,this.field.setDebugMode(this.isDebugMode)},isFocusedCharacter:function(t){return this.field.targetCharacter===t},onClickCharacterCell:function(t){this.field.setTargetCharacter(t)},onClickDeleteCharacter:function(t){this.characters=this.characters.filter((function(e){return e!==t})),this.field.removeCharacter(t)},generateCharacter:function(t){var e=0===t?new c["Point"](256,0):new c["Point"](448,0),r=new g(this.renderTexture,e,new y);for(r.currentDirection=4;;){r.x=32+16*Math.floor(Math.random()*(this.field.horizontalGridNum-4)),r.y=32+16*Math.floor(Math.random()*(this.field.verticalGridNum-4)),this.field.addCharacter(r,!1);var a=this.field.hitWall(r,0,0),i=Object(h["a"])(a,3),s=i[0];i[1],i[2];if(!s)break;this.field.removeCharacter(r),console.log(s)}this.characters.push(r),r.type=t}},beforeDestroy:function(){this.pixiApp.destroy(!0)},components:{CharacterCell:R},computed:{},props:[]}),N=E,I=(r("6fee"),Object(B["a"])(N,a,i,!1,null,"fa13033c",null));e["default"]=I.exports},"99af":function(t,e,r){"use strict";var a=r("23e7"),i=r("d039"),h=r("e8b5"),s=r("861d"),n=r("7b0b"),o=r("50c4"),c=r("8418"),d=r("65f0"),l=r("1dde"),u=r("b622"),p=r("2d00"),g=u("isConcatSpreadable"),f=9007199254740991,C="Maximum allowed index exceeded",y=p>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),m=l("concat"),v=function(t){if(!s(t))return!1;var e=t[g];return void 0!==e?!!e:h(t)},S=!y||!m;a({target:"Array",proto:!0,forced:S},{concat:function(t){var e,r,a,i,h,s=n(this),l=d(s,0),u=0;for(e=-1,a=arguments.length;e<a;e++)if(h=-1===e?s:arguments[e],v(h)){if(i=o(h.length),u+i>f)throw TypeError(C);for(r=0;r<i;r++,u++)r in h&&c(l,u,h[r])}else{if(u>=f)throw TypeError(C);c(l,u++,h)}return l.length=u,l}})}}]);
//# sourceMappingURL=chunk-2306fe73.b21a767c.js.map