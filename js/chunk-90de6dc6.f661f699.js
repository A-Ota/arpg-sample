(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90de6dc6"],{"159b":function(t,e,r){var n=r("da84"),i=r("fdbc"),a=r("17c2"),o=r("9112");for(var s in i){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(d){u.forEach=a}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,i=r("a640"),a=r("ae40"),o=i("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"18a5":function(t,e,r){"use strict";var n=r("23e7"),i=r("857a"),a=r("af03");n({target:"String",proto:!0,forced:a("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},"277d":function(t,e,r){var n=r("23e7"),i=r("e8b5");n({target:"Array",stat:!0},{isArray:i})},3835:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r("277d");function n(t){if(Array.isArray(t))return t}r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(r.push(o.value),e&&r.length===e)break}catch(c){i=!0,a=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw a}}return r}}r("a630"),r("fb6a"),r("0d03"),r("b0c0"),r("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return n(t)||i(t,e)||o(t,e)||s()}},4160:function(t,e,r){"use strict";var n=r("23e7"),i=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4df4":function(t,e,r){"use strict";var n=r("0366"),i=r("7b0b"),a=r("9bdd"),o=r("e95a"),s=r("50c4"),c=r("8418"),u=r("35a1");t.exports=function(t){var e,r,d,f,h,l,p=i(t),v="function"==typeof this?this:Array,m=arguments.length,y=m>1?arguments[1]:void 0,g=void 0!==y,b=u(p),w=0;if(g&&(y=n(y,m>2?arguments[2]:void 0,2)),void 0==b||v==Array&&o(b))for(e=s(p.length),r=new v(e);e>w;w++)l=g?y(p[w],w):p[w],c(r,w,l);else for(f=b.call(p),h=f.next,r=new v;!(d=h.call(f)).done;w++)l=g?a(f,y,[d.value,w],!0):d.value,c(r,w,l);return r.length=w,r}},6062:function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),a=r("e2cc"),o=r("0366"),s=r("19aa"),c=r("2266"),u=r("7dd0"),d=r("2626"),f=r("83ab"),h=r("f183").fastKey,l=r("69f3"),p=l.set,v=l.getterFor;t.exports={getConstructor:function(t,e,r,u){var d=t((function(t,n){s(t,d,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=n&&c(n,t[u],{that:t,AS_ENTRIES:r})})),l=v(e),m=function(t,e,r){var n,i,a=l(t),o=y(t,e);return o?o.value=r:(a.last=o={index:i=h(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=o),n&&(n.next=o),f?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t},y=function(t,e){var r,n=l(t),i=h(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return a(d.prototype,{clear:function(){var t=this,e=l(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,r=l(e),n=y(e,t);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&&(a.next=i),i&&(i.previous=a),r.first==n&&(r.first=i),r.last==n&&(r.last=a),f?r.size--:e.size--}return!!n},forEach:function(t){var e,r=l(this),n=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),a(d.prototype,r?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),f&&n(d.prototype,"size",{get:function(){return l(this).size}}),d},setStrong:function(t,e,r){var n=e+" Iterator",i=v(e),a=v(n);u(t,e,(function(t,e){p(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),d(e)}}},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("94ca"),o=r("6eeb"),s=r("f183"),c=r("2266"),u=r("19aa"),d=r("861d"),f=r("d039"),h=r("1c7e"),l=r("d44e"),p=r("7156");t.exports=function(t,e,r){var v=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),y=v?"set":"add",g=i[t],b=g&&g.prototype,w=g,C={},x=function(t){var e=b[t];o(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!d(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(a(t,"function"!=typeof g||!(m||b.forEach&&!f((function(){(new g).entries().next()})))))w=r.getConstructor(e,t,v,y),s.REQUIRED=!0;else if(a(t,!0)){var S=new w,E=S[y](m?{}:-0,1)!=S,O=f((function(){S.has(1)})),j=h((function(t){new g(t)})),A=!m&&f((function(){var t=new g,e=5;while(e--)t[y](e,e);return!t.has(-0)}));j||(w=e((function(e,r){u(e,w,t);var n=p(new g,e,w);return void 0!=r&&c(r,n[y],{that:n,AS_ENTRIES:v}),n})),w.prototype=b,b.constructor=w),(O||A)&&(x("delete"),x("has"),v&&x("get")),(A||E)&&x(y),m&&b.clear&&delete b.clear}return C[t]=w,n({global:!0,forced:w!=g},C),l(w,t),m||r.setStrong(w,t,v),w}},"857a":function(t,e,r){var n=r("1d80"),i=/"/g;t.exports=function(t,e,r,a){var o=String(n(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(a).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"}},"99af":function(t,e,r){"use strict";var n=r("23e7"),i=r("d039"),a=r("e8b5"),o=r("861d"),s=r("7b0b"),c=r("50c4"),u=r("8418"),d=r("65f0"),f=r("1dde"),h=r("b622"),l=r("2d00"),p=h("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",y=l>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=f("concat"),b=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},w=!y||!g;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,r,n,i,a,o=s(this),f=d(o,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?o:arguments[e],b(a)){if(i=c(a.length),h+i>v)throw TypeError(m);for(r=0;r<i;r++,h++)r in a&&u(f,h,a[r])}else{if(h>=v)throw TypeError(m);u(f,h++,a)}return f.length=h,f}})},"9bdd":function(t,e,r){var n=r("825a"),i=r("2a62");t.exports=function(t,e,r,a){try{return a?e(n(r)[0],r[1]):e(r)}catch(o){throw i(t),o}}},a630:function(t,e,r){var n=r("23e7"),i=r("4df4"),a=r("1c7e"),o=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,r){var n=r("83ab"),i=r("d039"),a=r("5135"),o=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];e||(e={});var r=[][t],u=!!a(e,"ACCESSORS")&&e.ACCESSORS,d=a(e,0)?e[0]:c,f=a(e,1)?e[1]:void 0;return s[t]=!!r&&!i((function(){if(u&&!n)return!0;var t={length:-1};u?o(t,1,{enumerable:!0,get:c}):t[1]=1,r.call(t,d,f)}))}},af03:function(t,e,r){var n=r("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0c0:function(t,e,r){var n=r("83ab"),i=r("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,c="name";n&&!(c in a)&&i(a,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},bb2f:function(t,e,r){var n=r("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e0ff:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{position:"relative"}},[r("div",{ref:"pixi_area",staticStyle:{position:"absolute",width:"320px",height:"240px"}}),r("div",{staticStyle:{position:"absolute",left:"10px",top:"10px","background-color":"#0000ff66",color:"#fff"}},[t._v("矢印キーで移動")])])},i=[],a=(r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2b0e")),o=r("22a2"),s=(r("99af"),r("18a5"),r("3835")),c=r("d4ec"),u=r("bee2"),d=r("257e"),f=r("262e"),h=r("2caf"),l=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(t,n){var i;return Object(c["a"])(this,r),i=e.call(this),i.sheet=t,i.routine=n,i.animationFrame=0,i._currentDirection=2,i.animationStep=0,n.character=Object(d["a"])(i),i.body=new o["Sprite"](t.textures["character-2-0"]),i.body.anchor.set(.5,.5),i.addChild(i.body),i.shadow=new o["Graphics"],i.shadow.lineStyle(0),i.shadow.beginFill(0,1),i.shadow.drawEllipse(0,28,16,10),i.shadow.endFill(),i.shadow.alpha=.5,i.addChildAt(i.shadow,0),i}return Object(u["a"])(r,[{key:"currentDirection",get:function(){return this._currentDirection},set:function(t){this._currentDirection=t,this.syncTexture()}},{key:"syncTexture",value:function(){this.body.texture=this.sheet.textures["character-".concat(this.currentDirection,"-").concat(3===this.animationStep?1:this.animationStep)]}},{key:"update",value:function(){this.routine.update(),this.zIndex=this.position.y,++this.animationFrame,this.animationFrame>30&&(this.animationFrame=0,this.animationStep=(this.animationStep+1)%4,this.syncTexture())}}]),r}(o["Container"]),p=function t(){Object(c["a"])(this,t)},v=37,m=38,y=39,g=40,b=function(t,e){var r=.7*e;switch(t){case 1:return[-r,r];case 2:return[0,e];case 3:return[r,r];case 4:return[-e,0];case 6:return[e,0];case 7:return[-r,-r];case 8:return[0,-e];case 9:return[r,-r]}return[0,0]},w=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(t){var n;return Object(c["a"])(this,r),n=e.call(this),n.pressedKeyCodeSet=t,n}return Object(u["a"])(r,[{key:"update",value:function(){var t=null;if(this.pressedKeyCodeSet.has(v)?t=this.pressedKeyCodeSet.has(g)?1:this.pressedKeyCodeSet.has(m)?7:4:this.pressedKeyCodeSet.has(y)?t=this.pressedKeyCodeSet.has(g)?3:this.pressedKeyCodeSet.has(m)?9:6:this.pressedKeyCodeSet.has(m)?t=8:this.pressedKeyCodeSet.has(g)&&(t=2),null!=t){this.character.currentDirection=t;var e=b(this.character.currentDirection,1),r=Object(s["a"])(e,2),n=r[0],i=r[1];this.character.position.x+=n,this.character.position.y+=i}}}]),r}(p),C=function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;return Object(c["a"])(this,r),t=e.call(this),t.isMoving=n,t.frameCountToWait=i,t.frameCountToMove=a,t}return Object(u["a"])(r,[{key:"update",value:function(){if(this.isMoving){var t=b(this.character.currentDirection,.6),e=Object(s["a"])(t,2),r=e[0],n=e[1];this.character.position.x+=r,this.character.position.y+=n,--this.frameCountToWait,this.frameCountToWait<=0&&(this.frameCountToWait=0,this.frameCountToMove=60+30*Math.floor(3*Math.random()),this.isMoving=!1)}else--this.frameCountToMove,this.frameCountToMove<=0&&(this.frameCountToMove=0,this.frameCountToWait=60,this.character.currentDirection=[1,2,3,4,6,7,8,9][Math.floor(8*Math.random())],this.isMoving=!0)}}]),r}(p),x=(r("4160"),r("159b"),function(t){Object(f["a"])(r,t);var e=Object(h["a"])(r);function r(t){var n;Object(c["a"])(this,r),n=e.call(this),n.texture=t,n.horizontalGridNum=30,n.verticalGridNum=30,n.targetCharacter=null,n.characters=[],n.sortableChildren=!0,n.fieldContainer=new o["ParticleContainer"],n.fieldContainer.zIndex=-1e3;var i=t.clone();i.frame=new o["Rectangle"](0,0,16,16);for(var a=0;a<n.verticalGridNum;++a)for(var s=0;s<n.horizontalGridNum;++s){var u=o["Sprite"].from(i);u.position=new o["Point"](16*s,16*a),n.fieldContainer.addChild(u)}var d=t.clone();d.frame=new o["Rectangle"](96,64,16,16);var f=t.clone();f.frame=new o["Rectangle"](112,64,16,16);for(var h=1;h<n.verticalGridNum-1;++h){var l=o["Sprite"].from(d);l.position=new o["Point"](0,16*h),n.fieldContainer.addChild(l);var p=o["Sprite"].from(f);p.position=new o["Point"](16*n.horizontalGridNum-16,16*h),n.fieldContainer.addChild(p)}var v=t.clone();v.frame=new o["Rectangle"](96,96,16,16);var m=t.clone();m.frame=new o["Rectangle"](112,96,16,16);for(var y=1;y<n.horizontalGridNum-1;++y){var g=o["Sprite"].from(v);g.position=new o["Point"](16*y,0),n.fieldContainer.addChild(g);var b=o["Sprite"].from(m);b.position=new o["Point"](16*y,16*n.verticalGridNum-16),n.fieldContainer.addChild(b)}var w=t.clone();w.frame=new o["Rectangle"](96,48,16,16);var C=o["Sprite"].from(w);C.position=new o["Point"](0,0),n.fieldContainer.addChild(C);var x=t.clone();x.frame=new o["Rectangle"](112,48,16,16);var S=o["Sprite"].from(x);S.position=new o["Point"](16*n.horizontalGridNum-16,0),n.fieldContainer.addChild(S);var E=t.clone();E.frame=new o["Rectangle"](96,80,16,16);var O=o["Sprite"].from(E);O.position=new o["Point"](0,16*n.verticalGridNum-16),n.fieldContainer.addChild(O);var j=t.clone();j.frame=new o["Rectangle"](112,80,16,16);var A=o["Sprite"].from(j);A.position=new o["Point"](16*n.horizontalGridNum-16,16*n.verticalGridNum-16),n.fieldContainer.addChild(A);var k=t.clone();k.frame=new o["Rectangle"](32,0,64,80);var M=o["Sprite"].from(k);return M.position=new o["Point"](16*n.horizontalGridNum/2-32,16*n.verticalGridNum/2-40),n.fieldContainer.addChild(M),n.addChild(n.fieldContainer),n}return Object(u["a"])(r,[{key:"addCharacter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.characters.push(t),e&&(this.targetCharacter=t),this.addChild(t)}},{key:"update",value:function(){this.characters.forEach((function(t){return t.update()}));var t=224,e=96,r=144,n=96;if(this.targetCharacter){var i=this.targetCharacter.x+this.x;i>t?this.x=-(this.targetCharacter.x-t):i<e&&(this.x=-(this.targetCharacter.x-e));var a=this.targetCharacter.y+this.y;a>r?this.y=-(this.targetCharacter.y-r):a<n&&(this.y=-(this.targetCharacter.y-n))}this.x=Math.floor(Math.min(0,Math.max(-(16*this.horizontalGridNum-320),this.x))),this.y=Math.floor(Math.min(0,Math.max(-(16*this.verticalGridNum-240),this.y)))}}]),r}(o["Container"])),S=a["default"].extend({data:function(){return{pixiApp:null,field:null,pressedKeyCodeSet:new Set,id:0}},mounted:function(){var t=this;this.id=Math.floor(100*Math.random()),o["settings"].RESOLUTION=window.devicePixelRatio,o["settings"].SCALE_MODE=o["SCALE_MODES"].NEAREST,window.onkeydown=this.onKeyDown,window.onkeyup=this.onKeyUp;var e={width:320,height:240};this.pixiApp=new o["Application"](e);var r=this.$refs["pixi_area"];r.appendChild(this.pixiApp.view);var n=new o["Sprite"](o["Texture"].WHITE);n.width=320,n.height=240,n.tint=13421772,this.pixiApp.stage.addChild(n),o["utils"].clearTextureCache(),o["Loader"].shared.reset().add("/arpg-sample/images/chara01.json").add("/arpg-sample/images/chara02.json").add("/arpg-sample/images/mapchip.png").load((function(){var e=o["Loader"].shared.resources["/arpg-sample/images/mapchip.png"].texture;t.field=new x(e),t.pixiApp.stage.addChild(t.field);var r=new l(o["Loader"].shared.resources["/arpg-sample/images/chara01.json"].spritesheet,new w(t.pressedKeyCodeSet));r.position.set(180,110),t.field.addCharacter(r,!0);var n=new l(o["Loader"].shared.resources["/arpg-sample/images/chara02.json"].spritesheet,new C);n.position.set(140,90),t.field.addCharacter(n)})),this.pixiApp.ticker.add(this.update)},methods:{onKeyDown:function(t){this.pressedKeyCodeSet.add(t.keyCode)},onKeyUp:function(t){this.pressedKeyCodeSet["delete"](t.keyCode)},update:function(t){null!=this.field&&this.field.update()}},beforeDestroy:function(){console.log("bdd"),this.pixiApp.destroy(!0)},components:{},computed:{},props:[]}),E=S,O=r("2877"),j=Object(O["a"])(E,n,i,!1,null,"ee4bc082",null);e["default"]=j.exports},f183:function(t,e,r){var n=r("d012"),i=r("861d"),a=r("5135"),o=r("9bf2").f,s=r("90e3"),c=r("bb2f"),u=s("meta"),d=0,f=Object.isExtensible||function(){return!0},h=function(t){o(t,u,{value:{objectID:"O"+ ++d,weakData:{}}})},l=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,u)){if(!f(t))return"F";if(!e)return"E";h(t)}return t[u].objectID},p=function(t,e){if(!a(t,u)){if(!f(t))return!0;if(!e)return!1;h(t)}return t[u].weakData},v=function(t){return c&&m.REQUIRED&&f(t)&&!a(t,u)&&h(t),t},m=t.exports={REQUIRED:!1,fastKey:l,getWeakData:p,onFreeze:v};n[u]=!0},fb6a:function(t,e,r){"use strict";var n=r("23e7"),i=r("861d"),a=r("e8b5"),o=r("23cb"),s=r("50c4"),c=r("fc6a"),u=r("8418"),d=r("b622"),f=r("1dde"),h=r("ae40"),l=f("slice"),p=h("slice",{ACCESSORS:!0,0:0,1:2}),v=d("species"),m=[].slice,y=Math.max;n({target:"Array",proto:!0,forced:!l||!p},{slice:function(t,e){var r,n,d,f=c(this),h=s(f.length),l=o(t,h),p=o(void 0===e?h:e,h);if(a(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?i(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(f,l,p);for(n=new(void 0===r?Array:r)(y(p-l,0)),d=0;l<p;l++,d++)l in f&&u(n,d,f[l]);return n.length=d,n}})}}]);
//# sourceMappingURL=chunk-90de6dc6.f661f699.js.map