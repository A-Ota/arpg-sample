(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93d5791c"],{"159b":function(t,e,r){var i=r("da84"),a=r("fdbc"),n=r("17c2"),o=r("9112");for(var c in a){var s=i[c],h=s&&s.prototype;if(h&&h.forEach!==n)try{o(h,"forEach",n)}catch(d){h.forEach=n}}},"17c2":function(t,e,r){"use strict";var i=r("b727").forEach,a=r("a640"),n=r("ae40"),o=a("forEach"),c=n("forEach");t.exports=o&&c?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"277d":function(t,e,r){var i=r("23e7"),a=r("e8b5");i({target:"Array",stat:!0},{isArray:a})},3835:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));r("277d");function i(t){if(Array.isArray(t))return t}r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function a(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],i=!0,a=!1,n=void 0;try{for(var o,c=t[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)if(r.push(o.value),e&&r.length===e)break}catch(s){a=!0,n=s}finally{try{i||null==c["return"]||c["return"]()}finally{if(a)throw n}}return r}}r("a630"),r("fb6a"),r("0d03"),r("b0c0"),r("25f0");function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function o(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return i(t)||a(t,e)||o(t,e)||c()}},4160:function(t,e,r){"use strict";var i=r("23e7"),a=r("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4df4":function(t,e,r){"use strict";var i=r("0366"),a=r("7b0b"),n=r("9bdd"),o=r("e95a"),c=r("50c4"),s=r("8418"),h=r("35a1");t.exports=function(t){var e,r,d,u,l,f,v=a(t),p="function"==typeof this?this:Array,y=arguments.length,b=y>1?arguments[1]:void 0,g=void 0!==b,m=h(v),C=0;if(g&&(b=i(b,y>2?arguments[2]:void 0,2)),void 0==m||p==Array&&o(m))for(e=c(v.length),r=new p(e);e>C;C++)f=g?b(v[C],C):v[C],s(r,C,f);else for(u=m.call(v),l=u.next,r=new p;!(d=l.call(u)).done;C++)f=g?n(u,b,[d.value,C],!0):d.value,s(r,C,f);return r.length=C,r}},"4e82":function(t,e,r){"use strict";var i=r("23e7"),a=r("1c0b"),n=r("7b0b"),o=r("d039"),c=r("a640"),s=[],h=s.sort,d=o((function(){s.sort(void 0)})),u=o((function(){s.sort(null)})),l=c("sort"),f=d||!u||!l;i({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?h.call(n(this)):h.call(n(this),a(t))}})},"5d41":function(t,e,r){var i=r("23e7"),a=r("861d"),n=r("825a"),o=r("5135"),c=r("06cf"),s=r("e163");function h(t,e){var r,i,d=arguments.length<3?t:arguments[2];return n(t)===d?t[e]:(r=c.f(t,e))?o(r,"value")?r.value:void 0===r.get?void 0:r.get.call(d):a(i=s(t))?h(i,e,d):void 0}i({target:"Reflect",stat:!0},{get:h})},"9bdd":function(t,e,r){var i=r("825a"),a=r("2a62");t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(o){throw a(t),o}}},a630:function(t,e,r){var i=r("23e7"),a=r("4df4"),n=r("1c7e"),o=!n((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:a})},a640:function(t,e,r){"use strict";var i=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&i((function(){r.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,r){var i=r("83ab"),a=r("d039"),n=r("5135"),o=Object.defineProperty,c={},s=function(t){throw t};t.exports=function(t,e){if(n(c,t))return c[t];e||(e={});var r=[][t],h=!!n(e,"ACCESSORS")&&e.ACCESSORS,d=n(e,0)?e[0]:s,u=n(e,1)?e[1]:void 0;return c[t]=!!r&&!a((function(){if(h&&!i)return!0;var t={length:-1};h?o(t,1,{enumerable:!0,get:s}):t[1]=1,r.call(t,d,u)}))}},b0c0:function(t,e,r){var i=r("83ab"),a=r("9bf2").f,n=Function.prototype,o=n.toString,c=/^\s*function ([^ (]*)/,s="name";i&&!(s in n)&&a(n,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},e439:function(t,e,r){var i=r("23e7"),a=r("d039"),n=r("fc6a"),o=r("06cf").f,c=r("83ab"),s=a((function(){o(1)})),h=!c||s;i({target:"Object",stat:!0,forced:h,sham:!c},{getOwnPropertyDescriptor:function(t,e){return o(n(t),e)}})},e967:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{position:"relative"}},[r("div",{ref:"pixi_area",staticStyle:{position:"absolute",width:"320px",height:"240px"}}),r("div",{staticStyle:{position:"absolute",left:"10px",top:"10px","background-color":"#0000ff66",color:"#fff"}},[t._v("矢印キーで移動")])])},a=[],n=(r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("2b0e")),o=r("22a2"),c=(r("18a5"),r("3835")),s=r("262e"),h=r("2caf"),d=r("d4ec"),u=r("bee2"),l=function(t){Object(s["a"])(r,t);var e=Object(h["a"])(r);function r(){var t;return Object(d["a"])(this,r),t=e.apply(this,arguments),t.zOrder=0,t}return r}(o["i"]),f=function(){function t(e,r,i){Object(d["a"])(this,t),this.textureOffset=r,this.routine=i,this.animationFrame=0,this._currentDirection=2,this.x_=0,this.y_=0,this.animationStep=0,this.bodySprite=new l,this.bodySprite.texture=new o["j"](e.baseTexture,new o["g"](r.x,r.y,32,64)),i.character=this,this.bodySprite.anchor.set(.5,.5);var a=new o["j"](e.baseTexture,new o["g"](0,224,32,32));this.shadowSprite=o["i"].from(a),this.shadowSprite.alpha=.5,this.shadowSprite.anchor.set(.5,.5)}return Object(u["a"])(t,[{key:"x",get:function(){return this.x_},set:function(t){this.x_=t}},{key:"y",get:function(){return this.y_},set:function(t){this.y_=t}},{key:"currentDirection",get:function(){return this._currentDirection},set:function(t){this._currentDirection=t,this.syncTexture()}},{key:"syncTexture",value:function(){var t=0,e=0;switch(this.currentDirection){case 1:t=96;break;case 2:break;case 3:t=96,e=64;break;case 4:e=64;break;case 6:e=128;break;case 7:t=96,e=128;break;case 8:e=192;break;case 9:t=96,e=192;break}t+=32*(3===this.animationStep?1:this.animationStep);var r=new o["g"](this.textureOffset.x+t,this.textureOffset.y+e,32,64);this.bodySprite.texture.frame=r}},{key:"update",value:function(){this.routine.update(),this.bodySprite.x=this.x,this.bodySprite.y=this.y,this.shadowSprite.x=this.x,this.shadowSprite.y=this.y+28,this.bodySprite.zOrder=this.bodySprite.position.y,++this.animationFrame,this.animationFrame>30&&(this.animationFrame=0,this.animationStep=(this.animationStep+1)%4,this.syncTexture())}}]),t}(),v=function t(){Object(d["a"])(this,t)},p=37,y=38,b=39,g=40,m=function(t,e){var r=.7*e;switch(t){case 1:return[-r,r];case 2:return[0,e];case 3:return[r,r];case 4:return[-e,0];case 6:return[e,0];case 7:return[-r,-r];case 8:return[0,-e];case 9:return[r,-r]}return[0,0]},C=function(t){Object(s["a"])(r,t);var e=Object(h["a"])(r);function r(t){var i;return Object(d["a"])(this,r),i=e.call(this),i.pressedKeyCodeSet=t,i}return Object(u["a"])(r,[{key:"update",value:function(){var t=null;if(this.pressedKeyCodeSet.has(p)?t=this.pressedKeyCodeSet.has(g)?1:this.pressedKeyCodeSet.has(y)?7:4:this.pressedKeyCodeSet.has(b)?t=this.pressedKeyCodeSet.has(g)?3:this.pressedKeyCodeSet.has(y)?9:6:this.pressedKeyCodeSet.has(y)?t=8:this.pressedKeyCodeSet.has(g)&&(t=2),null!=t){this.character.currentDirection=t;var e=m(this.character.currentDirection,1),r=Object(c["a"])(e,2),i=r[0],a=r[1];this.character.x+=i,this.character.y+=a}}}]),r}(v),w=function(t){Object(s["a"])(r,t);var e=Object(h["a"])(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;return Object(d["a"])(this,r),t=e.call(this),t.isMoving=i,t.frameCountToWait=a,t.frameCountToMove=n,t}return Object(u["a"])(r,[{key:"update",value:function(){if(this.isMoving){var t=m(this.character.currentDirection,.6),e=Object(c["a"])(t,2),r=e[0],i=e[1];this.character.x+=r,this.character.y+=i,--this.frameCountToWait,this.frameCountToWait<=0&&(this.frameCountToWait=0,this.frameCountToMove=60+30*Math.floor(3*Math.random()),this.isMoving=!1)}else--this.frameCountToMove,this.frameCountToMove<=0&&(this.frameCountToMove=0,this.frameCountToWait=60,this.character.currentDirection=[1,2,3,4,6,7,8,9][Math.floor(8*Math.random())],this.isMoving=!0)}}]),r}(v),O=(r("4160"),r("159b"),r("4e82"),r("e439"),r("5d41"),r("7e84"));function x(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(O["a"])(t),null===t)break;return t}function S(t,e,r){return S="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=x(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(r):a.value}},S(t,e,r||t)}var j=1e100,k=[],A=[],N=0;function z(t,e){return t.zOrder>e.zOrder?1:t.zOrder<e.zOrder?-1:t.arrivalOrder>e.arrivalOrder?1:t.arrivalOrder<e.arrivalOrder?-1:0}var G=function(t){Object(s["a"])(r,t);var e=Object(h["a"])(r);function r(){return Object(d["a"])(this,r),e.apply(this,arguments)}return Object(u["a"])(r,[{key:"addChildZ",value:function(t,e){t.zOrder=e||0,t.oldZOrder=j,t.arrivalOrder=++N,S(Object(O["a"])(r.prototype),"addChild",this).call(this,t)}},{key:"sortChildren",value:function(){for(var t=this.children,e=t.length,r=0;r<e;r++){var i=t[r];i.zOrder!==i.oldZOrder?k.push(i):A.push(i),i.oldZOrder=i.zOrder}if(0!==k.length){k.length>1&&k.sort(z);var a=0,n=0,o=0;while(n<k.length&&o<A.length)z(k[n],A[o])<0?t[a++]=k[n++]:t[a++]=A[o++];while(n<k.length)t[a++]=k[n++];while(o<A.length)t[a++]=A[o++];k.length=0,A.length=0}else A.length=0}}]),r}(o["e"]),M=function(t){Object(s["a"])(r,t);var e=Object(h["a"])(r);function r(t){var i;Object(d["a"])(this,r),i=e.call(this),i.texture=t,i.horizontalGridNum=30,i.verticalGridNum=30,i.targetCharacter=null,i.characters=[],i.sortableChildren=!0,i.bgLayerContainer=new o["e"](2e4,{uvs:!1}),i.layerContainer=new G(2e4,{uvs:!0,vertices:!0}),i.addChild(i.bgLayerContainer),i.addChild(i.layerContainer);var a=t.clone();a.frame=new o["g"](0,0,16,16);for(var n=0;n<i.verticalGridNum;++n)for(var c=0;c<i.horizontalGridNum;++c){var s=o["i"].from(a);s.position=new o["f"](16*c,16*n),i.bgLayerContainer.addChild(s)}var h=t.clone();h.frame=new o["g"](96,64,16,16);var u=t.clone();u.frame=new o["g"](112,64,16,16);for(var l=1;l<i.verticalGridNum-1;++l){var f=o["i"].from(h);f.position=new o["f"](0,16*l),i.bgLayerContainer.addChild(f);var v=o["i"].from(u);v.position=new o["f"](16*i.horizontalGridNum-16,16*l),i.bgLayerContainer.addChild(v)}var p=t.clone();p.frame=new o["g"](96,96,16,16);var y=t.clone();y.frame=new o["g"](112,96,16,16);for(var b=1;b<i.horizontalGridNum-1;++b){var g=o["i"].from(p);g.position=new o["f"](16*b,0),i.bgLayerContainer.addChild(g);var m=o["i"].from(y);m.position=new o["f"](16*b,16*i.verticalGridNum-16),i.bgLayerContainer.addChild(m)}var C=t.clone();C.frame=new o["g"](96,48,16,16);var w=o["i"].from(C);w.position=new o["f"](0,0),i.bgLayerContainer.addChild(w);var O=t.clone();O.frame=new o["g"](112,48,16,16);var x=o["i"].from(O);x.position=new o["f"](16*i.horizontalGridNum-16,0),i.bgLayerContainer.addChild(x);var S=t.clone();S.frame=new o["g"](96,80,16,16);var j=o["i"].from(S);j.position=new o["f"](0,16*i.verticalGridNum-16),i.bgLayerContainer.addChild(j);var k=t.clone();k.frame=new o["g"](112,80,16,16);var A=o["i"].from(k);A.position=new o["f"](16*i.horizontalGridNum-16,16*i.verticalGridNum-16),i.bgLayerContainer.addChild(A);var N=t.clone();N.frame=new o["g"](32,64,64,16);var z=o["i"].from(N);z.position=new o["f"](16*i.horizontalGridNum/2-32,18*i.verticalGridNum/2),i.bgLayerContainer.addChild(z);var M=t.clone();M.frame=new o["g"](32,0,64,64);var E=new o["i"](M);E.position=new o["f"](16*i.horizontalGridNum/2-32,18*i.verticalGridNum/2-64),E.zOrder=E.position.y+48,i.layerContainer.addChild(E);var T=t.clone();T.frame=new o["g"](32,64,64,16);var K=o["i"].from(T);K.position=new o["f"](14*i.horizontalGridNum/2-32,15*i.verticalGridNum/2),i.bgLayerContainer.addChild(K);var D=t.clone();D.frame=new o["g"](32,0,64,64);var L=new o["i"](D);return L.position=new o["f"](14*i.horizontalGridNum/2-32,15*i.verticalGridNum/2-64),L.zOrder=L.position.y+48,i.layerContainer.addChild(L),i}return Object(u["a"])(r,[{key:"addCharacter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.characters.push(t),e&&(this.targetCharacter=t),this.layerContainer.addChildZ(t.bodySprite,1),this.layerContainer.addChildZ(t.shadowSprite,1)}},{key:"update",value:function(){this.characters.forEach((function(t){return t.update()}));var t=224,e=96,r=144,i=96;if(this.targetCharacter){var a=this.targetCharacter.x+this.x;a>t?this.x=-(this.targetCharacter.x-t):a<e&&(this.x=-(this.targetCharacter.x-e));var n=this.targetCharacter.y+this.y;n>r?this.y=-(this.targetCharacter.y-r):n<i&&(this.y=-(this.targetCharacter.y-i))}this.x=Math.floor(Math.min(0,Math.max(-(16*this.horizontalGridNum-320),this.x))),this.y=Math.floor(Math.min(0,Math.max(-(16*this.verticalGridNum-240),this.y))),this.layerContainer.sortChildren()}}]),r}(o["b"]),E=n["default"].extend({data:function(){return{pixiApp:null,field:null,pressedKeyCodeSet:new Set,id:0}},mounted:function(){var t=this;o["k"].RESOLUTION=window.devicePixelRatio,o["k"].SCALE_MODE=o["h"].NEAREST,window.onkeydown=this.onKeyDown,window.onkeyup=this.onKeyUp;var e={width:320,height:240};this.pixiApp=new o["a"](e);var r=this.$refs["pixi_area"];r.appendChild(this.pixiApp.view);var i=new o["i"](o["j"].WHITE);i.width=320,i.height=240,i.tint=13421772,this.pixiApp.stage.addChild(i),o["l"].clearTextureCache(),o["d"].shared.reset().add("/arpg-sample/images/stages/005/all.png").load((function(){var e=o["d"].shared.resources["/arpg-sample/images/stages/005/all.png"].texture;t.field=new M(e),t.pixiApp.stage.addChild(t.field);var r=new f(e,new o["f"](0,256),new C(t.pressedKeyCodeSet));r.x=180,r.y=110,t.field.addCharacter(r,!0);var i=new f(e,new o["f"](192,256),new w);i.x=140,i.y=90,t.field.addCharacter(i)})),this.pixiApp.ticker.add(this.update)},methods:{onKeyDown:function(t){this.pressedKeyCodeSet.add(t.keyCode)},onKeyUp:function(t){this.pressedKeyCodeSet["delete"](t.keyCode)},update:function(t){null!=this.field&&this.field.update()}},beforeDestroy:function(){console.log("bdd"),this.pixiApp.destroy(!0)},components:{},computed:{},props:[]}),T=E,K=r("2877"),D=Object(K["a"])(T,i,a,!1,null,"1c9319b0",null);e["default"]=D.exports},fb6a:function(t,e,r){"use strict";var i=r("23e7"),a=r("861d"),n=r("e8b5"),o=r("23cb"),c=r("50c4"),s=r("fc6a"),h=r("8418"),d=r("b622"),u=r("1dde"),l=r("ae40"),f=u("slice"),v=l("slice",{ACCESSORS:!0,0:0,1:2}),p=d("species"),y=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!f||!v},{slice:function(t,e){var r,i,d,u=s(this),l=c(u.length),f=o(t,l),v=o(void 0===e?l:e,l);if(n(u)&&(r=u.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?a(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return y.call(u,f,v);for(i=new(void 0===r?Array:r)(b(v-f,0)),d=0;f<v;f++,d++)f in u&&h(i,d,u[f]);return i.length=d,i}})}}]);
//# sourceMappingURL=chunk-93d5791c.b7945f76.js.map