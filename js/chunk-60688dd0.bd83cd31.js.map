{"version":3,"sources":["webpack:///./src/stages/014/InputManager.ts","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/game/01/View.vue?d7de","webpack:///./src/game/01/View.vue?4b74","webpack:///./src/game/01/View.vue?003e","webpack:///./src/game/01/View.vue?dfcd","webpack:///./src/game/01/View.vue"],"names":["InputManager","lastPressedKeyCodeSet","Set","nowPressedKeyCodeSet","keyCode","this","add","Array","from","has","clear","$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined","$map","map","render","_vm","_h","$createElement","_c","_self","staticStyle","ref","staticClass","on","onClickCanvas","tipsText","_v","_s","_e","field","isEditorMode","onClickToggleEditing","editing","onClickLoad","onClickSave","_l","editingInfo","info","index","key","class","selectedStageInfoIndex","$event","onClickStage","directives","name","rawName","value","expression","modifiers","attrs","domProps","composing","$set","_n","$forceUpdate","maxLength","onFieldXChanged","x","selectedColor","onColorSelected","staticRenderFns","SCALE","oldNow","performance","now","ms","counter","averageMs","message","tipsList","push","shift","score","numSprites","i","sprite","anchor","set","position","addChild","refreshNumber","tmp","Math","pow","num","floor","visible","texture","shared","resources","comboCount","container","combo","num1","num2","num3","color","status","coroutine","scaleUp","breakCoroutine","next","scale","y","alpha","UPPER_LIMIT_Y","LOWER_LIMIT_Y","SAKANA_X","KEY_CODE_RED","KEY_CODE_GREEN","KEY_CODE_BLUE","KEY_CODE_JUMP1","KEY_CODE_JUMP2","MIN_Y_SPEED","MAX_Y_SPEED","inputManger","ySpeed","done","refreshColor","jumped","checkJump","min","max","rotation","isPressing","oldColor","newColor","colorFromInput","damageCoroutine","layout","stageInfos","inputManager","speed","oldX","bubblePlaces","bubbles","walls","sortableChildren","sakana","zIndex","createWallByX","update","forEach","bubble","hitCheck","createBubble","updateWall","parent","removeChild","createBubbldePlaces","bubblePlace","wave","ground","wall","reload","distance","sqrt","calcComboRate","damaged","stageInfo","extend","data","pixiApp","fpsCounter","scoreArea","comboArea","tipsManager","tipsTextDelay","mounted","RESOLUTION","window","devicePixelRatio","SCALE_MODE","NEAREST","onkeydown","onKeyDown","onkeyup","onKeyUp","size","width","height","ticker","maxFPS","minFPS","$refs","appendChild","view","bg","WHITE","tint","stage","clearTextureCache","reset","load","stage0","methods","event","delta","isEnded","checkPoint","endTurn","text","checkTips","point","clientX","clientY","addBubble","removeBubble","json","localStorage","getItem","JSON","parse","setItem","stringify","closeTips","beforeDestroy","destroy","components","computed","$route","query","editorMode","props","component"],"mappings":"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","file":"js/chunk-60688dd0.bd83cd31.js","sourcesContent":["export default class InputManager {\r\n  private lastPressedKeyCodeSet: Set<number> = new Set()\r\n  private nowPressedKeyCodeSet: Set<number> = new Set()\r\n  public onKeyDown(keyCode: number) {\r\n    this.nowPressedKeyCodeSet.add(keyCode)\r\n  }\r\n  public onKeyUp(keyCode: number) {\r\n    this.nowPressedKeyCodeSet.delete(keyCode)\r\n  }\r\n  public endTurn() {\r\n    this.lastPressedKeyCodeSet = new Set(Array.from(this.nowPressedKeyCodeSet))\r\n  }\r\n  public isPressing(keyCode: number) {\r\n    return this.nowPressedKeyCodeSet.has(keyCode)\r\n  }\r\n  public isPressed(keyCode: number) {\r\n    return this.nowPressedKeyCodeSet.has(keyCode) && !this.lastPressedKeyCodeSet.has(keyCode)\r\n  }\r\n  public isReleased(keyCode: number) {\r\n    return !this.nowPressedKeyCodeSet.has(keyCode) && this.lastPressedKeyCodeSet.has(keyCode)\r\n  }\r\n  public reset() {\r\n    this.lastPressedKeyCodeSet.clear()\r\n    this.nowPressedKeyCodeSet.clear()\r\n  }\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./View.vue?vue&type=style&index=0&id=6646657a&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"position\":\"relative\"}},[_c('div',{ref:\"pixi_area\",staticClass:\"canvas\",on:{\"click\":_vm.onClickCanvas}},[(_vm.tipsText != null)?_c('div',{staticClass:\"tips\"},[_c('div',{staticClass:\"message\"},[_vm._v(_vm._s(_vm.tipsText))])]):_vm._e()]),(_vm.field != null && _vm.isEditorMode)?[_c('b-button',{staticStyle:{\"margin\":\"4px\"},on:{\"click\":_vm.onClickToggleEditing}},[_vm._v(_vm._s(_vm.editing ? '再生' : 'エディット'))]),_c('b-button',{staticStyle:{\"margin\":\"4px\"},on:{\"click\":_vm.onClickLoad}},[_vm._v(\"読み込み\")]),_c('b-button',{staticStyle:{\"margin\":\"4px\"},on:{\"click\":_vm.onClickSave}},[_vm._v(\"保存\")]),_c('div',{staticStyle:{\"margin-top\":\"8px\",\"margin-bottom\":\"8px\"}},_vm._l((_vm.editingInfo.stageInfos),function(info,index){return _c('span',{key:index,staticClass:\"stage-select\",class:{ 'focused': index === _vm.editingInfo.selectedStageInfoIndex },on:{\"click\":function($event){return _vm.onClickStage(index)}}},[_vm._v(\"ステージ\"+_vm._s(index))])}),0),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.field.maxLength),expression:\"field.maxLength\",modifiers:{\"number\":true}}],attrs:{\"id\":\"fieldLength\",\"type\":\"number\",\"step\":\"1\"},domProps:{\"value\":(_vm.field.maxLength)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.field, \"maxLength\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fieldLength\"}},[_vm._v(\"ステージの長さ\")])]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.field.x),expression:\"field.x\",modifiers:{\"number\":true}}],staticStyle:{\"width\":\"400px\"},attrs:{\"id\":\"fieldX\",\"type\":\"range\",\"value\":\"0\",\"max\":\"0\",\"min\":-_vm.field.maxLength},domProps:{\"value\":(_vm.field.x)},on:{\"input\":_vm.onFieldXChanged,\"__r\":function($event){_vm.$set(_vm.field, \"x\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('label',{attrs:{\"for\":\"fieldX\"}},[_vm._v(_vm._s(_vm.field.x))])]),_c('div',[_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'r' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-r.png\"},on:{\"click\":function($event){return _vm.onColorSelected('r')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'g' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-g.png\"},on:{\"click\":function($event){return _vm.onColorSelected('g')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'b' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-b.png\"},on:{\"click\":function($event){return _vm.onColorSelected('b')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'y' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-y.png\"},on:{\"click\":function($event){return _vm.onColorSelected('y')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'lb' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-lb.png\"},on:{\"click\":function($event){return _vm.onColorSelected('lb')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'p' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-p.png\"},on:{\"click\":function($event){return _vm.onColorSelected('p')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'w' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-w.png\"},on:{\"click\":function($event){return _vm.onColorSelected('w')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === 'bl' },attrs:{\"src\":\"/arpg-sample/images/game/01/bubble-bl.png\"},on:{\"click\":function($event){return _vm.onColorSelected('bl')}}}),_c('img',{staticClass:\"icon-button\",class:{ 'focused': _vm.editingInfo.selectedColor === null },attrs:{\"src\":\"/arpg-sample/images/game/01/trash.png\"},on:{\"click\":function($event){return _vm.onColorSelected(null)}}})])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// 得点システム\r\n// 1餌で100点、コンボ数で10点づつ上がり200点まで上がる。11コンボ目以降は200点のまま。\r\n// フルコンボで取れる得点に対して\r\n// 100%: SSS\r\n// 99%: SS\r\n// 95%: S\r\n// 90%: A\r\n// 75%: B\r\n// 60%: C\r\n// D\r\n// フルコンボで取れる得点に対して95%を満たせばSランク\r\n\r\n// TODO:画像非同期読み込みからのゲームスタートだとリプレイのフレーム数がずれるのでは？\r\nconst SCALE = 2.0\r\n\r\n// 高速歩きで壁にぶつかった場合、移動しないのではなくx, yについて移動できるところまで戻してあげる。\r\nimport Vue from \"vue\"\r\nimport * as PIXI from \"pixi.js\"\r\nimport InputManager from '@/stages/014/InputManager'\r\nimport stage0json from '@/assets/game/01/stage0.json'\r\n\r\nclass FpsCounter {\r\n  private ms = 0\r\n  private counter = 0\r\n  public averageMs = 0\r\n  constructor(private oldNow = performance.now()) {}\r\n  public checkPoint() {\r\n    const now = performance.now()\r\n    this.ms += (now - this.oldNow)\r\n    this.oldNow = now\r\n    ++this.counter\r\n    if (this.counter >= 60) {\r\n      this.averageMs = this.ms / this.counter\r\n      this.counter = 0\r\n      this.ms = 0\r\n    }\r\n  }\r\n}\r\n\r\n\r\nclass Tips {\r\n  constructor(public message: string, public x: number) {}\r\n}\r\nclass TipsManager {\r\n  public tipsList: Array<Tips> = []\r\n  constructor() {\r\n    this.tipsList.push(new Tips('Spaceキーか↑キーを押すと浮上、\\n離すと潜水するよ。', 0))\r\n    this.tipsList.push(new Tips('黒い泡に触れて酸素を補給しよう。', 200))\r\n    this.tipsList.push(new Tips('連続して泡を集めるとコンボカウントが上がるよ。', 400))\r\n    this.tipsList.push(new Tips('赤い泡は赤くなってから触れよう。\\nZキーを押している間は赤くなるよ。', 550))\r\n    this.tipsList.push(new Tips('Xキーを押すと緑色になれるよ。', 875))\r\n    this.tipsList.push(new Tips('Cキーを押すと青くなれるよ。', 1150))\r\n    this.tipsList.push(new Tips('ZキーとXキーを一緒に押すと黄色くなれるよ。', 1400))\r\n    this.tipsList.push(new Tips('浮上しながら泡を集めよう。', 1700))\r\n    this.tipsList.push(new Tips('潜水しながら泡を集めよう。', 2050))\r\n    this.tipsList.push(new Tips('Z, X, Cを組み合わせて一緒に押すと色々な色になるよ。試してみよう。', 2320))\r\n    this.tipsList.push(new Tips('チュートリアルはここまで。\\n本編に乞うご期待。', 3200))\r\n  }\r\n  checkTips(x: number): string | null {\r\n    if (this.tipsList.length > 0 ) {\r\n      if (this.tipsList[0].x <= -x) {\r\n        return this.tipsList.shift()!.message\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\nclass ScoreArea extends PIXI.Container {\r\n  private score = 0\r\n  private numSprites: Array<PIXI.Sprite> = []\r\n  constructor(private field: Field) {\r\n    super()\r\n    for (let i = 0; i < 5; ++i) {\r\n      const sprite = PIXI.Sprite.from(`/arpg-sample/images/game/01/num0-s.png`)\r\n      sprite.anchor.set(1, 1)\r\n      sprite.position.set(-i * 20, 0)\r\n      this.numSprites.push(sprite)\r\n      this.addChild(sprite)\r\n    }\r\n    this.refreshNumber()\r\n  }\r\n  public update() {\r\n    if (this.score != this.field.score) {\r\n      this.score = this.field.score\r\n      this.refreshNumber()\r\n    }\r\n  }\r\n  private refreshNumber() {\r\n    for (let i = 0; i < 5; ++i) {\r\n      const tmp = Math.pow(10, i)\r\n      const num = Math.floor(this.score / tmp) % 10\r\n      const sprite = this.numSprites[i]\r\n      sprite.visible = (i === 0 || this.score >= tmp)\r\n      sprite.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/num${num}-s.png`].texture\r\n    }\r\n  }\r\n}\r\n\r\nclass ComboArea extends PIXI.Container {\r\n  private comboCount = 0\r\n  private container!: PIXI.Container\r\n  private num1!: PIXI.Sprite\r\n  private num2!: PIXI.Sprite\r\n  private num3!: PIXI.Sprite\r\n  constructor(private field: Field) {\r\n    super()\r\n    this.container = new PIXI.Container()\r\n    this.container.position.set(0, -26)\r\n    this.addChild(this.container)\r\n    const combo = PIXI.Sprite.from(\"/arpg-sample/images/game/01/combo.png\")\r\n    combo.anchor.set(0.5, 0.5)\r\n    combo.position.set(0, 0)\r\n    this.addChild(combo)\r\n    // 1ケタ目\r\n    this.num1 = PIXI.Sprite.from(\"/arpg-sample/images/game/01/num0.png\")\r\n    this.num1.anchor.set(0.5, 0.5)\r\n    this.num1.position.set(0, 0)\r\n    this.container.addChild(this.num1)\r\n    // 2ケタ目\r\n    this.num2 = PIXI.Sprite.from(\"/arpg-sample/images/game/01/num0.png\")\r\n    this.num2.anchor.set(0.5, 0.5)\r\n    this.num2.position.set(-24, 0)\r\n    this.num2.visible = false\r\n    this.container.addChild(this.num2)\r\n    // 3ケタ目\r\n    this.num3 = PIXI.Sprite.from(\"/arpg-sample/images/game/01/num0.png\")\r\n    this.num3.anchor.set(0.5, 0.5)\r\n    this.num3.position.set(-48, 0)\r\n    this.num3.visible = false\r\n    this.container.addChild(this.num3)\r\n    this.visible = false\r\n  }\r\n  public update() {\r\n    if (this.comboCount != this.field.comboCount) {\r\n      this.comboCount = this.field.comboCount\r\n      this.refreshNumber()\r\n      if (this.comboCount >= 2) {\r\n        this.visible = true\r\n      }\r\n    }\r\n  }\r\n  private refreshNumber() {\r\n    const num1 = Math.floor(this.comboCount / 1) % 10\r\n    const num2 = Math.floor(this.comboCount / 10) % 10\r\n    const num3 = Math.floor(this.comboCount / 100) % 10\r\n    this.num1.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/num${num1}.png`].texture\r\n    this.num2.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/num${num2}.png`].texture\r\n    this.num3.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/num${num3}.png`].texture\r\n    if (this.comboCount < 10) {\r\n      this.container.x = 0\r\n      this.num1.visible = true\r\n      this.num2.visible = false\r\n      this.num3.visible = false\r\n    }\r\n    else if (this.comboCount < 100) {\r\n      this.container.x = 12\r\n      this.num1.visible = true\r\n      this.num2.visible = true\r\n      this.num3.visible = false\r\n    }\r\n    else if (this.comboCount < 1000) {\r\n      this.container.x = 24\r\n      this.num1.visible = true\r\n      this.num2.visible = true\r\n      this.num3.visible = true\r\n    }\r\n  }\r\n}\r\n\r\ntype ActorStatus = 'active' | 'deleting' | 'deleted'\r\nclass Bubble extends PIXI.Sprite {\r\n  public status: ActorStatus = 'active'\r\n  private coroutine: Generator | null = null\r\n  constructor(public color: ColorType) {\r\n    super()\r\n    this.anchor.set(0.5, 0.5)\r\n    this.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/bubble-${color}.png`].texture\r\n  }\r\n  public break(scaleUp: boolean) {\r\n    this.status = 'deleting'\r\n    this.coroutine = this.breakCoroutine(scaleUp)\r\n  }\r\n  public update() {\r\n    if (this.coroutine != null) {\r\n      this.coroutine.next()\r\n    }\r\n  }\r\n  public *breakCoroutine(scaleUp: boolean) {\r\n    for (let i = 0; i < 5; ++i) {\r\n      this.scale.x += scaleUp ? 0.1 : -0.1\r\n      this.scale.y += scaleUp ? 0.1 : -0.1\r\n      this.alpha -= 0.2\r\n      yield\r\n    }\r\n    this.status = 'deleted'\r\n  }\r\n}\r\nconst UPPER_LIMIT_Y = 35\r\nconst LOWER_LIMIT_Y = 205\r\nconst SAKANA_X = 50\r\n\r\ntype ColorType = 'r' | 'g' | 'b' | 'y' | 'lb' | 'p' | 'w' | 'bl'\r\nconst KEY_CODE_RED = 90\r\nconst KEY_CODE_GREEN = 88\r\nconst KEY_CODE_BLUE = 67\r\nconst KEY_CODE_JUMP1 = 38\r\nconst KEY_CODE_JUMP2 = 32\r\nconst MIN_Y_SPEED = -1.6\r\nconst MAX_Y_SPEED = 1.6\r\nclass Sakana extends PIXI.Sprite {\r\n  public color: ColorType = 'bl'\r\n  private ySpeed = 0\r\n  private coroutine: Generator | null = null\r\n  constructor(private inputManger: InputManager) {\r\n    super(PIXI.Loader.shared.resources[\"/arpg-sample/images/game/01/sakana-bl.png\"].texture)\r\n    this.position.x = SAKANA_X\r\n    this.anchor.set(0.5, 0.5)\r\n  }\r\n  update() {\r\n    if (this.coroutine != null) {\r\n      if (this.coroutine.next().done) {\r\n        this.coroutine = null\r\n      }\r\n    }\r\n    this.refreshColor()\r\n    const jumped = this.checkJump()\r\n    if (!jumped && this.y === UPPER_LIMIT_Y) {\r\n      this.ySpeed = 0\r\n    }\r\n    this.ySpeed += 0.08\r\n    this.ySpeed = Math.min(MAX_Y_SPEED, Math.max(this.ySpeed, MIN_Y_SPEED))\r\n    this.position.y += this.ySpeed\r\n    this.rotation = (this.ySpeed * 0.1)\r\n  }\r\n  checkJump() {\r\n    if (this.inputManger.isPressing(KEY_CODE_JUMP1) || this.inputManger.isPressing(KEY_CODE_JUMP2)) {\r\n      this.ySpeed = MIN_Y_SPEED\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  refreshColor() {\r\n    const oldColor = this.color\r\n    const newColor = this.colorFromInput()\r\n    if (oldColor != newColor) {\r\n      this.color = newColor\r\n      this.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/sakana-${this.color}.png`].texture\r\n    }\r\n  }\r\n  public damaged() {\r\n    this.coroutine = this.damageCoroutine()\r\n  }\r\n  *damageCoroutine() {\r\n    this.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/sakana-${this.color}-d.png`].texture\r\n    for (let i = 0; i < 3; ++i) {\r\n      yield; yield; yield; yield;\r\n      this.visible = false\r\n      yield; yield; yield; yield;\r\n      this.visible = true\r\n    }\r\n    this.texture = PIXI.Loader.shared.resources[`/arpg-sample/images/game/01/sakana-${this.color}.png`].texture\r\n  }\r\n  colorFromInput(): ColorType {\r\n    if (this.inputManger.isPressing(KEY_CODE_RED)) {\r\n      if (this.inputManger.isPressing(KEY_CODE_GREEN)) {\r\n        if (this.inputManger.isPressing(KEY_CODE_BLUE)) {\r\n          return 'w'\r\n        } else {\r\n         return 'y'\r\n        }\r\n      } else if (this.inputManger.isPressing(KEY_CODE_BLUE)) {\r\n        return 'p'\r\n      } else {\r\n        return 'r'\r\n      }\r\n    } else if (this.inputManger.isPressing(KEY_CODE_GREEN)) {\r\n      if (this.inputManger.isPressing(KEY_CODE_BLUE)) {\r\n        return 'lb'\r\n      } else {\r\n        return 'g'\r\n      }\r\n    } else if (this.inputManger.isPressing(KEY_CODE_BLUE)) {\r\n      return 'b'\r\n    } else {\r\n      return 'bl'\r\n    }\r\n  }\r\n}\r\n\r\nclass StageInfo {\r\n  public length = 6400\r\n  public layout: Array<any> = []\r\n}\r\n\r\nclass EditingInfo {\r\n  public selectedColor: ColorType | null = null\r\n  public selectedStageInfoIndex = 0\r\n  public stageInfos: Array<StageInfo> = [new StageInfo(), new StageInfo(), new StageInfo(), new StageInfo(), new StageInfo()]\r\n}\r\n\r\nclass Field extends PIXI.Container {\r\n  public maxLength = 640 * 10\r\n  private speed = -0.9\r\n  private oldX = 0\r\n  private bubblePlaces: Array<[PIXI.Point, ColorType]> = []\r\n  private bubbles: Array<Bubble> = []\r\n  private walls: Array<PIXI.Sprite> = []\r\n  private sakana: Sakana\r\n  public score = 0\r\n  public comboCount = 0\r\n  constructor(inputManager: InputManager) {\r\n    super() \r\n    this.sortableChildren = true\r\n    this.sakana = new Sakana(inputManager)\r\n    this.sakana.y = 120\r\n    this.sakana.zIndex = 1\r\n    this.addChild(this.sakana!)\r\n    this.createWallByX(0)\r\n    this.createWallByX(128)\r\n    this.createWallByX(256)\r\n  }\r\n  update() {\r\n    this.oldX = this.x\r\n    this.x += this.speed\r\n    this.sakana.x -= this.speed\r\n    this.sakana.update()\r\n    this.sakana.y = Math.max(UPPER_LIMIT_Y, Math.min(LOWER_LIMIT_Y, this.sakana.y))\r\n    this.bubbles.forEach(bubble => bubble.update())\r\n    this.hitCheck()\r\n    this.createBubble()\r\n    this.updateWall()\r\n    this.bubbles = this.bubbles.filter(bubble => {\r\n      if (bubble.status == 'deleted') {\r\n        bubble.parent.removeChild(bubble)\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n  }\r\n  isEnded() {\r\n    return -this.x >= this.maxLength\r\n  }\r\n  createBubble() {\r\n    const createBubbldePlaces = this.bubblePlaces.filter(bubblePlace => {\r\n      return bubblePlace[0].x >= -this.oldX + 320 + 32 && bubblePlace[0].x < -this.x + 320 + 32\r\n    })\r\n    createBubbldePlaces.forEach(bubblePlace => {\r\n      const bubble = new Bubble(bubblePlace[1])\r\n      bubble.position = bubblePlace[0]\r\n      this.addChild(bubble)\r\n      this.bubbles.push(bubble)\r\n    })\r\n  }\r\n  createWallByX(x: number) {\r\n      const wave = PIXI.Sprite.from('/arpg-sample/images/game/01/wave.png')\r\n      wave.x = x\r\n      const ground = PIXI.Sprite.from('/arpg-sample/images/game/01/ground.png')\r\n      ground.anchor.set(0, 1)\r\n      ground.y = 240\r\n      ground.x = x\r\n      this.addChild(wave)\r\n      this.addChild(ground)\r\n      this.walls.push(wave)\r\n      this.walls.push(ground)\r\n  }\r\n  updateWall() {\r\n    if (Math.floor(this.oldX / 128) != Math.floor(this.x / 128)) {\r\n      this.createWallByX(-Math.floor(this.oldX / 128) * 128 + 320)\r\n      const wave = PIXI.Sprite.from('/arpg-sample/images/game/01/wave.png')\r\n      wave.x = -Math.floor(this.oldX / 128) * 128 + 320\r\n      const ground = PIXI.Sprite.from('/arpg-sample/images/game/01/ground.png')\r\n      ground.anchor.set(0, 1)\r\n      ground.y = 240\r\n      ground.x = -Math.floor(this.oldX / 128) * 128 + 320\r\n      this.addChild(wave)\r\n      this.addChild(ground)\r\n      this.walls.push(wave)\r\n      this.walls.push(ground)\r\n      this.walls = this.walls.filter(wall => {\r\n        if (wall.x < -this.x - 128) {\r\n          wall.parent.removeChild(wall)\r\n          return false\r\n        }\r\n        return true\r\n      })\r\n    }\r\n  }\r\n  addBubble(color: ColorType, position: PIXI.Point) {\r\n    this.bubblePlaces.push([position, color])\r\n    this.reload()\r\n  }\r\n  removeBubble(position: PIXI.Point) {\r\n    this.bubblePlaces = this.bubblePlaces.filter(bubblePlace => {\r\n      const distance = Math.sqrt(Math.pow(bubblePlace[0].x - position.x, 2) + Math.pow(bubblePlace[0].y - position.y, 2))\r\n      return distance > 12\r\n    })\r\n    this.reload()\r\n  }\r\n  hitCheck() {\r\n    this.bubbles.filter(bubble => bubble.status == 'active').forEach(bubble => {\r\n      const distance = Math.sqrt(Math.pow(bubble.x - this.sakana.x, 2) + Math.pow(bubble.y - this.sakana.y, 2))\r\n      // 当たった\r\n      if (distance < 28) {\r\n        // 同じ色なら得点\r\n        if (this.sakana.color == (bubble as any).color) {\r\n          bubble.break(false)\r\n          this.score += (100 * this.calcComboRate())\r\n          ++this.comboCount\r\n        }\r\n        // 違う色なら減点\r\n        else {\r\n          this.sakana.damaged()\r\n          bubble.break(true)\r\n          this.comboCount = 0\r\n        }\r\n      }\r\n    })\r\n  }\r\n  calcComboRate() {\r\n    return Math.min(2, 1 + this.comboCount * 0.1)\r\n  }\r\n  reload() {\r\n    this.sakana.x = -this.x + SAKANA_X\r\n    // 現在の視界付近の泡を生成\r\n    this.bubbles.forEach(bubble => {\r\n      bubble.parent.removeChild(bubble)\r\n    })\r\n    this.bubbles = []\r\n    this.bubblePlaces.forEach(bubblePlace => {\r\n      const position = bubblePlace[0]\r\n      if (position.x >= - this.x && position.x <= - this.x + 320) {\r\n        const bubble = new Bubble(bubblePlace[1])\r\n        bubble.position = position\r\n        this.addChild(bubble)\r\n        this.bubbles.push(bubble)\r\n      }\r\n    })\r\n  }\r\n  import(stageInfo: StageInfo) {\r\n    this.maxLength = stageInfo.length\r\n    this.bubblePlaces = stageInfo.layout.map(value => [new PIXI.Point(value[0], value[1]), value[2]])\r\n    this.x = 0\r\n    this.reload()\r\n  }\r\n  export(): StageInfo {\r\n    const stageInfo = new StageInfo()\r\n    stageInfo.length = this.maxLength\r\n    stageInfo.layout = this.bubblePlaces.map(bubblePlace => [bubblePlace[0].x, bubblePlace[0].y, bubblePlace[1]])\r\n    return stageInfo\r\n  }\r\n}\r\n\r\nexport default Vue.extend({\r\n  data(): {\r\n    pixiApp: PIXI.Application | null;\r\n    inputManager: InputManager;\r\n    fpsCounter: FpsCounter;\r\n    field: Field | null;\r\n    editingInfo: EditingInfo;\r\n    editing: boolean;\r\n    scoreArea: ScoreArea | null;\r\n    comboArea: ComboArea | null;\r\n    tipsManager: TipsManager;\r\n    tipsText: string | null;\r\n    tipsTextDelay: number;\r\n    } {\r\n    return {\r\n      pixiApp: null,\r\n      inputManager: new InputManager(),\r\n      fpsCounter: new FpsCounter(),\r\n      field: null,\r\n      editingInfo: new EditingInfo(),\r\n      editing: true,\r\n      scoreArea: null,\r\n      comboArea: null,\r\n      tipsManager: new TipsManager(),\r\n      tipsText: null,\r\n      tipsTextDelay: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    PIXI.settings.RESOLUTION = window.devicePixelRatio\r\n    // PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.LINEAR\r\n    PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST\r\n    // PIXI.settings.TARGET_FPMS = 1\r\n    if (!this.isEditorMode) {\r\n      this.editing = false\r\n    }\r\n    window.onkeydown = this.onKeyDown\r\n    window.onkeyup = this.onKeyUp\r\n\r\n    const size = { width: 640, height: 480 }\r\n    this.pixiApp = new PIXI.Application(size)\r\n    this.pixiApp.ticker.maxFPS = 60\r\n    this.pixiApp.ticker.minFPS = 60\r\n\r\n    const container = this.$refs[\"pixi_area\"] as any\r\n    container.appendChild(this.pixiApp.view)\r\n\r\n    // 背景色\r\n    const bg = new PIXI.Sprite(PIXI.Texture.WHITE)\r\n    bg.width = 320\r\n    bg.height = 240\r\n    bg.tint = 0x2f85c8\r\n    this.pixiApp.stage.addChild(bg)\r\n    this.pixiApp.stage.scale.x = SCALE\r\n    this.pixiApp.stage.scale.y = SCALE\r\n\r\n    PIXI.utils.clearTextureCache()\r\n    PIXI.Loader.shared\r\n      .reset()\r\n      .add(\"/arpg-sample/images/game/01/sakana-r.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-g.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-b.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-y.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-lb.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-p.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-w.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-bl.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-r-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-g-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-b-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-y-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-lb-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-p-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-w-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/sakana-bl-d.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-r.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-g.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-b.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-y.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-lb.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-p.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-w.png\")\r\n      .add(\"/arpg-sample/images/game/01/bubble-bl.png\")\r\n      .add(\"/arpg-sample/images/game/01/combo.png\")\r\n      .add(\"/arpg-sample/images/game/01/num1.png\")\r\n      .add(\"/arpg-sample/images/game/01/num2.png\")\r\n      .add(\"/arpg-sample/images/game/01/num3.png\")\r\n      .add(\"/arpg-sample/images/game/01/num4.png\")\r\n      .add(\"/arpg-sample/images/game/01/num5.png\")\r\n      .add(\"/arpg-sample/images/game/01/num6.png\")\r\n      .add(\"/arpg-sample/images/game/01/num7.png\")\r\n      .add(\"/arpg-sample/images/game/01/num8.png\")\r\n      .add(\"/arpg-sample/images/game/01/num9.png\")\r\n      .add(\"/arpg-sample/images/game/01/num0.png\")\r\n      .add(\"/arpg-sample/images/game/01/num1-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num2-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num3-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num4-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num5-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num6-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num7-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num8-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num9-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/num0-s.png\")\r\n      .add(\"/arpg-sample/images/game/01/wave.png\")\r\n      .add(\"/arpg-sample/images/game/01/ground.png\")\r\n      .load(() => {\r\n        this.field = new Field(this.inputManager)\r\n        this.pixiApp!.stage.addChild(this.field)\r\n        this.scoreArea = new ScoreArea(this.field)\r\n        this.scoreArea.position.set(316, 240)\r\n        this.pixiApp!.stage.addChild(this.scoreArea)\r\n        this.comboArea = new ComboArea(this.field)\r\n        this.comboArea.position.set(260, 48)\r\n        this.pixiApp!.stage.addChild(this.comboArea)\r\n        if (this.isEditorMode) {\r\n          this.onClickLoad()\r\n        } else {\r\n          this.field!.import(stage0json)\r\n        }\r\n        // メインループ\r\n        this.pixiApp!.ticker.add(this.update)\r\n      })\r\n\r\n  },\r\n  methods: {\r\n    onKeyDown(event: KeyboardEvent) {\r\n      if (this.tipsText != null) {\r\n        return\r\n      }\r\n      this.inputManager.onKeyDown(event.keyCode)\r\n    },\r\n    onKeyUp(event: any) {\r\n      if (this.tipsText != null && this.tipsTextDelay <= 0) {\r\n        this.tipsText = null\r\n        return\r\n      }\r\n      this.inputManager.onKeyUp(event.keyCode)\r\n    },\r\n    update(delta: number) {\r\n      // TIPS表示中や編集中は更新しない\r\n      if (this.editing || this.tipsText != null) {\r\n        this.tipsTextDelay = Math.max(0, this.tipsTextDelay - 1)\r\n        return\r\n      }\r\n      // ステージ終了時は更新しない\r\n      if (this.field!.isEnded()) {\r\n        return\r\n      }\r\n\r\n      this.fpsCounter.checkPoint()\r\n      this.field!.update()\r\n      this.scoreArea!.update()\r\n      this.comboArea!.update()\r\n      this.inputManager.endTurn()\r\n\r\n      // TIPS存在チェック\r\n      const text = this.tipsManager.checkTips(this.field!.x)\r\n      if (text != null) {\r\n        this.tipsText = text\r\n        this.tipsTextDelay = 30\r\n        this.inputManager.reset()\r\n      }\r\n    },\r\n    onColorSelected(color: ColorType | null) {\r\n      this.editingInfo.selectedColor = color\r\n    },\r\n    onClickCanvas(event: MouseEvent) {\r\n      if (!this.isEditorMode) {\r\n        return\r\n      }\r\n      const point = new PIXI.Point(event.clientX / SCALE - this.field!.position.x, event.clientY / SCALE)\r\n      if (this.editingInfo.selectedColor != null) {\r\n        this.field!.addBubble(this.editingInfo.selectedColor, point)\r\n      } else {\r\n        this.field!.removeBubble(point)\r\n      }\r\n    },\r\n    onClickToggleEditing() {\r\n      this.editing = !this.editing\r\n    },\r\n    onFieldXChanged() {\r\n      this.field!.reload()\r\n    },\r\n    onClickStage(index: number) {\r\n      this.editingInfo.selectedStageInfoIndex = index\r\n    },\r\n    onClickLoad() {\r\n      const json = localStorage.getItem('game/01/stageInfos')\r\n      if (json != null) {\r\n        this.editingInfo.stageInfos = JSON.parse(json)\r\n        this.field!.import(this.editingInfo.stageInfos[this.editingInfo.selectedStageInfoIndex])\r\n      }\r\n    },\r\n    onClickSave() {\r\n      this.editingInfo.stageInfos[this.editingInfo.selectedStageInfoIndex] = this.field!.export()\r\n      localStorage.setItem('game/01/stageInfos', JSON.stringify(this.editingInfo.stageInfos))\r\n    },\r\n    closeTips() {\r\n      this.tipsText = null\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // this.pixiApp!.ticker.remove(this.update)\r\n    this.pixiApp!.destroy(true)\r\n  },\r\n  components: {},\r\n  computed: {\r\n    isEditorMode(): boolean {\r\n      return this.$route.query.editorMode == '1'\r\n    }\r\n  },\r\n  props: []\r\n})\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./View.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./View.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./View.vue?vue&type=template&id=6646657a&scoped=true&\"\nimport script from \"./View.vue?vue&type=script&lang=ts&\"\nexport * from \"./View.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./View.vue?vue&type=style&index=0&id=6646657a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6646657a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}