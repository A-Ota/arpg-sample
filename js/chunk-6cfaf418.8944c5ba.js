(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cfaf418"],{"2e24":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i("8e32"),n=r.PixiFps;t.default=n},"8e32":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiFps=void 0;var r=n(i("22a2"));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};r.get||r.set?Object.defineProperty(t,i,r):t[i]=e[i]}return t.default=e,t}function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){y(e,t,i[t])}))}return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}function u(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?p(e):t}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v=function(e){function t(e){var i;s(this,t),i=u(this,d(t).call(this)),y(p(p(i)),"_fpsTextField",void 0),y(p(p(i)),"_fpsTicker",void 0),y(p(p(i)),"_timeValues",void 0),y(p(p(i)),"_lastTime",void 0);var n=new r.TextStyle({fontSize:t.DEFAULT_FONT_SIZE,fill:t.DEFAULT_FONT_COLOR});return i._timeValues=[],i._lastTime=(new Date).getTime(),i._fpsTextField=new r.Text("",o({},n,e)),i._fpsTicker=new r.Ticker,i._fpsTicker.add((function(){i.measureFPS()})),i._fpsTicker.start(),i.addChild(i._fpsTextField),i}return l(t,e),h(t,[{key:"measureFPS",value:function(){var e=(new Date).getTime();if(this._timeValues.push(1e3/(e-this._lastTime)),30===this._timeValues.length){for(var t=0,i=0;i<30;i++)t+=this._timeValues[i];this._fpsTextField.text=(t/30).toFixed(2),this._timeValues.length=0}this._lastTime=e}},{key:"style",set:function(e){this._fpsTextField.style=e}}]),t}(r.Container);t.PixiFps=v,y(v,"DEFAULT_FONT_SIZE",30),y(v,"DEFAULT_FONT_COLOR",16711680)},e967:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{position:"relative"}},[i("div",{ref:"pixi_area",staticStyle:{position:"absolute",width:"320px",height:"240px"}}),i("div",{staticStyle:{position:"absolute",left:"10px",top:"10px","background-color":"#0000ff66",color:"#fff"}},[e._v("矢印キーで移動")])])},n=[],a=(i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("2b0e")),o=i("22a2"),s=(i("18a5"),i("3835")),c=i("262e"),h=i("2caf"),u=i("d4ec"),d=i("bee2"),l=i("426a"),f=function(){function e(t,i,r){Object(u["a"])(this,e),this.textureOffset=i,this.routine=r,this.animationFrame=0,this._currentDirection=2,this.x_=0,this.y_=0,this.animationStep=0,this.bodySprite=new l["a"],this.bodySprite.texture=new o["Texture"](t.baseTexture,new o["Rectangle"](i.x,i.y,32,64)),r.character=this,this.bodySprite.anchor.set(.5,.5);var n=new o["Texture"](t.baseTexture,new o["Rectangle"](0,224,32,32));this.shadowSprite=o["Sprite"].from(n),this.shadowSprite.alpha=.5,this.shadowSprite.anchor.set(.5,.5)}return Object(d["a"])(e,[{key:"x",get:function(){return this.x_},set:function(e){this.x_=e}},{key:"y",get:function(){return this.y_},set:function(e){this.y_=e}},{key:"currentDirection",get:function(){return this._currentDirection},set:function(e){this._currentDirection=e,this.syncTexture()}},{key:"syncTexture",value:function(){var e=0,t=0;switch(this.currentDirection){case 1:e=96;break;case 2:break;case 3:e=96,t=64;break;case 4:t=64;break;case 6:t=128;break;case 7:e=96,t=128;break;case 8:t=192;break;case 9:e=96,t=192;break}e+=32*(3===this.animationStep?1:this.animationStep);var i=new o["Rectangle"](this.textureOffset.x+e,this.textureOffset.y+t,32,64);this.bodySprite.texture.frame=i}},{key:"update",value:function(){this.routine.update(),this.bodySprite.x=this.x,this.bodySprite.y=this.y,this.shadowSprite.x=this.x,this.shadowSprite.y=this.y+28,this.bodySprite.zOrder=this.bodySprite.position.y,++this.animationFrame,this.animationFrame>30&&(this.animationFrame=0,this.animationStep=(this.animationStep+1)%4,this.syncTexture())}}]),e}(),p=function e(){Object(u["a"])(this,e)},y=37,v=38,m=39,b=40,w=function(e,t){var i=.7*t;switch(e){case 1:return[-i,i];case 2:return[0,t];case 3:return[i,i];case 4:return[-t,0];case 6:return[t,0];case 7:return[-i,-i];case 8:return[0,-t];case 9:return[i,-i]}return[0,0]},C=function(e){Object(c["a"])(i,e);var t=Object(h["a"])(i);function i(e){var r;return Object(u["a"])(this,i),r=t.call(this),r.pressedKeyCodeSet=e,r}return Object(d["a"])(i,[{key:"update",value:function(){var e=null;if(this.pressedKeyCodeSet.has(y)?e=this.pressedKeyCodeSet.has(b)?1:this.pressedKeyCodeSet.has(v)?7:4:this.pressedKeyCodeSet.has(m)?e=this.pressedKeyCodeSet.has(b)?3:this.pressedKeyCodeSet.has(v)?9:6:this.pressedKeyCodeSet.has(v)?e=8:this.pressedKeyCodeSet.has(b)&&(e=2),null!=e){this.character.currentDirection=e;var t=w(this.character.currentDirection,1),i=Object(s["a"])(t,2),r=i[0],n=i[1];this.character.x+=r,this.character.y+=n}}}]),i}(p),g=function(e){Object(c["a"])(i,e);var t=Object(h["a"])(i);function i(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;return Object(u["a"])(this,i),e=t.call(this),e.isMoving=r,e.frameCountToWait=n,e.frameCountToMove=a,e}return Object(d["a"])(i,[{key:"update",value:function(){if(this.isMoving){var e=w(this.character.currentDirection,.6),t=Object(s["a"])(e,2),i=t[0],r=t[1];this.character.x+=i,this.character.y+=r,--this.frameCountToWait,this.frameCountToWait<=0&&(this.frameCountToWait=0,this.frameCountToMove=60+30*Math.floor(3*Math.random()),this.isMoving=!1)}else--this.frameCountToMove,this.frameCountToMove<=0&&(this.frameCountToMove=0,this.frameCountToWait=60,this.character.currentDirection=[1,2,3,4,6,7,8,9][Math.floor(8*Math.random())],this.isMoving=!0)}}]),i}(p),S=(i("4160"),i("159b"),i("d820")),x=function(e){Object(c["a"])(i,e);var t=Object(h["a"])(i);function i(e){var r;Object(u["a"])(this,i),r=t.call(this),r.texture=e,r.horizontalGridNum=30,r.verticalGridNum=30,r.targetCharacter=null,r.characters=[],r.sortableChildren=!0,r.bgLayerContainer=new o["ParticleContainer"](2e4,{uvs:!1}),r.layerContainer=new S["a"](2e4,{uvs:!0,vertices:!0,tint:!0}),r.addChild(r.bgLayerContainer),r.addChild(r.layerContainer);var n=e.clone();n.frame=new o["Rectangle"](0,0,16,16);for(var a=0;a<r.verticalGridNum;++a)for(var s=0;s<r.horizontalGridNum;++s){var c=o["Sprite"].from(n);c.position=new o["Point"](16*s,16*a),r.bgLayerContainer.addChild(c)}var h=e.clone();h.frame=new o["Rectangle"](96,64,16,16);var d=e.clone();d.frame=new o["Rectangle"](112,64,16,16);for(var l=1;l<r.verticalGridNum-1;++l){var f=o["Sprite"].from(h);f.position=new o["Point"](0,16*l),r.bgLayerContainer.addChild(f);var p=o["Sprite"].from(d);p.position=new o["Point"](16*r.horizontalGridNum-16,16*l),r.bgLayerContainer.addChild(p)}var y=e.clone();y.frame=new o["Rectangle"](96,96,16,16);var v=e.clone();v.frame=new o["Rectangle"](112,96,16,16);for(var m=1;m<r.horizontalGridNum-1;++m){var b=o["Sprite"].from(y);b.position=new o["Point"](16*m,0),r.bgLayerContainer.addChild(b);var w=o["Sprite"].from(v);w.position=new o["Point"](16*m,16*r.verticalGridNum-16),r.bgLayerContainer.addChild(w)}var C=e.clone();C.frame=new o["Rectangle"](96,48,16,16);var g=o["Sprite"].from(C);g.position=new o["Point"](0,0),r.bgLayerContainer.addChild(g);var x=e.clone();x.frame=new o["Rectangle"](112,48,16,16);var O=o["Sprite"].from(x);O.position=new o["Point"](16*r.horizontalGridNum-16,0),r.bgLayerContainer.addChild(O);var _=e.clone();_.frame=new o["Rectangle"](96,80,16,16);var T=o["Sprite"].from(_);T.position=new o["Point"](0,16*r.verticalGridNum-16),r.bgLayerContainer.addChild(T);var P=e.clone();P.frame=new o["Rectangle"](112,80,16,16);var j=o["Sprite"].from(P);j.position=new o["Point"](16*r.horizontalGridNum-16,16*r.verticalGridNum-16),r.bgLayerContainer.addChild(j);var k=e.clone();k.frame=new o["Rectangle"](32,64,64,16);var N=o["Sprite"].from(k);N.position=new o["Point"](16*r.horizontalGridNum/2-32,18*r.verticalGridNum/2),r.bgLayerContainer.addChild(N);var F=e.clone();F.frame=new o["Rectangle"](32,0,64,64);var L=new o["Sprite"](F);L.position=new o["Point"](16*r.horizontalGridNum/2-32,18*r.verticalGridNum/2-64),L.zOrder=L.position.y+48,r.layerContainer.addChild(L);var M=e.clone();M.frame=new o["Rectangle"](32,64,64,16);var D=o["Sprite"].from(M);D.position=new o["Point"](14*r.horizontalGridNum/2-32,15*r.verticalGridNum/2),r.bgLayerContainer.addChild(D);var G=e.clone();G.frame=new o["Rectangle"](32,0,64,64);var R=new o["Sprite"](G);return R.position=new o["Point"](14*r.horizontalGridNum/2-32,15*r.verticalGridNum/2-64),R.zOrder=R.position.y+48,r.layerContainer.addChild(R),r}return Object(d["a"])(i,[{key:"addCharacter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.characters.push(e),t&&(this.targetCharacter=e),this.layerContainer.addChildZ(e.bodySprite,1),this.layerContainer.addChildZ(e.shadowSprite,1)}},{key:"update",value:function(){this.characters.forEach((function(e){return e.update()}));var e=224,t=96,i=144,r=96;if(this.targetCharacter){var n=this.targetCharacter.x+this.x;n>e?this.x=-(this.targetCharacter.x-e):n<t&&(this.x=-(this.targetCharacter.x-t));var a=this.targetCharacter.y+this.y;a>i?this.y=-(this.targetCharacter.y-i):a<r&&(this.y=-(this.targetCharacter.y-r))}this.x=Math.floor(Math.min(0,Math.max(-(16*this.horizontalGridNum-320),this.x))),this.y=Math.floor(Math.min(0,Math.max(-(16*this.verticalGridNum-240),this.y))),this.layerContainer.sortChildren()}}]),i}(o["Container"]),O=i("2e24"),_=i.n(O),T=a["default"].extend({data:function(){return{pixiApp:null,field:null,pressedKeyCodeSet:new Set,id:0}},mounted:function(){var e=this;o["settings"].RESOLUTION=window.devicePixelRatio,o["settings"].SCALE_MODE=o["SCALE_MODES"].NEAREST,window.onkeydown=this.onKeyDown,window.onkeyup=this.onKeyUp;var t={width:320,height:240};this.pixiApp=new o["Application"](t);var i=this.$refs["pixi_area"];i.appendChild(this.pixiApp.view);var r=new o["Sprite"](o["Texture"].WHITE);r.width=320,r.height=240,r.tint=13421772,this.pixiApp.stage.addChild(r),o["utils"].clearTextureCache(),o["Loader"].shared.reset().add("/arpg-sample/images/stages/005/all.png").load((function(){var t=o["Loader"].shared.resources["/arpg-sample/images/stages/005/all.png"].texture;e.field=new x(t),e.pixiApp.stage.addChild(e.field);var i=new f(t,new o["Point"](0,256),new C(e.pressedKeyCodeSet));i.x=180,i.y=110,e.field.addCharacter(i,!0);var r=new f(t,new o["Point"](192,256),new g);r.x=140,r.y=90,e.field.addCharacter(r);var n=new _.a;n.position.x=4,n.position.y=220,n.style={fontSize:16,fill:"#FFF"},e.pixiApp.stage.addChild(n)})),this.pixiApp.ticker.add(this.update)},methods:{onKeyDown:function(e){this.pressedKeyCodeSet.add(e.keyCode)},onKeyUp:function(e){this.pressedKeyCodeSet["delete"](e.keyCode)},update:function(e){null!=this.field&&this.field.update()}},beforeDestroy:function(){console.log("bdd"),this.pixiApp.destroy(!0)},components:{},computed:{},props:[]}),P=T,j=i("2877"),k=Object(j["a"])(P,r,n,!1,null,"a7178b34",null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-6cfaf418.8944c5ba.js.map